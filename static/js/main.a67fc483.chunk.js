(this.webpackJsonpdotdot=this.webpackJsonpdotdot||[]).push([[0],{162:function(e,t,a){e.exports={chat:"Chat_chat__LEZtX",scrollingChat:"Chat_scrollingChat__165RB"}},163:function(e,t,a){e.exports={badge:"AdminBadge_badge__1HTPx",icon:"AdminBadge_icon__H_GPA"}},168:function(e,t,a){e.exports={footer:"PasswordModal_footer__32ASO",left:"PasswordModal_left__1uFYg"}},169:function(e,t,a){e.exports={onlineUsers:"OnlineUsers_onlineUsers__2Umxk",count:"OnlineUsers_count__1iz1Q"}},170:function(e,t,a){e.exports={messageContent:"MessageContent_messageContent__2lJQW",mention:"MessageContent_mention__1rALG"}},171:function(e,t,a){e.exports={reply:"Reply_reply__F5QhM",actions:"Reply_actions__xvZzN"}},172:function(e,t,a){e.exports={footer:"Footer_footer__pTkkR",container:"Footer_container__323Ar"}},173:function(e,t,a){e.exports={offline:"OfflineCheck_offline__2vKbm"}},20:function(e,t,a){e.exports={message:"Message_message__2v30T",reply:"Message_reply__jMrB5",replyButton:"Message_replyButton__15_Mb",mention:"Message_mention__82QFp",system:"Message_system__2g6ZE",user:"Message_user__3HofW",timestamp:"Message_timestamp__2armv",offline:"Message_offline__32gHu",icon:"Message_icon__ATXFm",inactive:"Message_inactive__2OBrK",body:"Message_body__32TEj",draft:"Message_draft__1zB7h",header:"Message_header__3wUCX",private:"Message_private__ORZ48",replyBox:"Message_replyBox__1NP5z"}},272:function(e,t,a){e.exports={wrapper:"Wrapper_wrapper__STXDh"}},276:function(e,t,a){e.exports={button:"Submit_button__VLsx-"}},278:function(e,t,a){e.exports={login:"Login_login__38Hzs"}},283:function(e,t,a){e.exports=a.p+"static/media/newMessage.482e2f99.mp3"},312:function(e,t,a){e.exports=a(640)},523:function(e,t){},60:function(e,t,a){e.exports={embed:"Embed_embed__3wuAi",icon:"Embed_icon__1MOM5",description:"Embed_description__12iOR",author:"Embed_author__3e6ma"}},61:function(e,t,a){e.exports={field:"Field_field__3cbYw",focused:"Field_focused__3YLuR",private:"Field_private__3D8g3",command:"Field_command__3ZUJA",inputArea:"Field_inputArea__3Xbcc",actions:"Field_actions__KHHdb"}},639:function(e,t,a){},640:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(19),o=a.n(s),l=a(56),c=a(12),i=a(86),u=a(270),m=a.n(u),d={CONNECT:"connect",DISCONNECT:"disconnect",MESSAGE:"message",COMMAND:"command",HISTORY:"history",ONLINE_USERS:"users",STATS:"stats",TIMER:"timer",CONTROL:"control",CHANGE_ROOM:"change_room"},f="https://api.dotdot.im",p=/^[A-Za-z0-9]+(?:[ _][A-Za-z0-9]+)*_?$/i,h="6LddUucUAAAAAIk_E1AoLY5YyxoulIzlyRLjMoMi",g=a(649),E=a(650),v=a(269),_=a(21),b=function(e){for(var t=e.data.map((function(e,t){return{date:t,value:e}})),a=t.length;a<F;a++)t.push({date:a,value:0});return r.a.createElement("div",{style:{width:"100%",height:"".concat(e.height||250,"px")}},r.a.createElement(_.f,null,r.a.createElement(_.b,{data:t,barSize:5,barCategoryGap:2,barGap:2,margin:{top:50,bottom:20,left:0,right:0}},r.a.createElement(_.i,{allowDecimals:!1}),r.a.createElement(_.h,{dataKey:"date",tick:!1},r.a.createElement(_.e,{value:e.label,position:"bottom",offset:-15,fill:"#ccc"})),r.a.createElement(_.a,{dataKey:"value",fill:"#f75f00",stroke:"#f75f00",isAnimationActive:!1,type:"linear"}),r.a.createElement(_.g,{cursor:{fill:"rgba(255, 255, 255, 0.1)"}}))))};function y(e){for(var t=[[Math.floor(e/31536e3),"y"],[Math.floor(e%31536e3/86400),"d"],[Math.floor(e%31536e3%86400/3600),"h"],[Math.floor(e%31536e3%86400%3600/60),"m"],[e%31536e3%86400%3600%60,"s"]],a="",n=0,r=t.length;n<r;n++)0!==t[n][0]&&(a+=" "+t[n][0]+t[n][1]);return a.trim()}var C=a(263),w=a.n(C),k=Object(n.createContext)({socket:null}),O=function(e){var t,a=W(),s=a.state,o=a.dispatch,l=Object(n.useState)(null),i=Object(c.a)(l,2),u=i[0],m=i[1],p=null===(t=s.auth.user)||void 0===t?void 0:t.hasPassword;Object(n.useEffect)((function(){if(s.auth.loggedIn&&!u){o({type:"error",payload:null});var e=w()(f,{reconnection:!0,timeout:2e3});setInterval((function(){e.connected&&e.emit("timer")}),3e4),p||setTimeout((function(){o({type:"system_message",payload:"Remember: If you want to keep this username, you must set a password! You can set it by clicking on the lock icon on the top right of the screen."})}),6e4),Object.values(d).forEach((function(t){e.on(t,(function(e){o({type:"socket_".concat(t),payload:e})}))})),e.on("stats",(function(e){o({type:"stats",payload:e})})),e.on("connect_error",(function(){o({type:"offline",payload:null})})),e.on("connect_timeout",(function(){o({type:"offline",payload:null})})),e.on("error",(function(e){o({type:"socket_".concat(d.DISCONNECT)}),e?(o({type:"error",payload:e}),o({type:"login",payload:null})):o({type:"offline",payload:null})})),m(e)}}),[o,u,s.auth.loggedIn,p]);var h={socket:u};return r.a.createElement(k.Provider,{value:h},e.children)},M=a(2),j=a.n(M),N=a(14),x=a(647),T=a(654),L=a(90),S=a.n(L),A=function(e){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:S.a.title},e.title),r.a.createElement("span",{className:S.a.content},e.content),e.icon&&r.a.createElement("span",{className:j()("icon",e.iconBg)},r.a.createElement(N.a,{icon:e.icon})),r.a.createElement("div",{className:S.a.history},r.a.createElement("span",{className:"text-muted"},e.history)));if(t=r.a.createElement("div",{className:S.a.dashboardWidget},t),!e.tooltip)return t;var a=r.a.createElement(x.a,{id:"counterTooltip"},e.tooltip);return r.a.createElement(T.a,{delay:{show:50,hide:0},overlay:a},t)},F=100,I=function(){var e=G().state,t=Object(n.useContext)(k).socket,a=e.stats.timeActive+e.stats.timeInactive,s=[[{header:"Time Active / Session",data:y(Math.round(e.stats.timeActive/e.stats.sessions)),detail:"Total: "+y(e.stats.timeActive)+" ("+Math.round(100*e.stats.timeActive/a)+"%)"},{header:"Time Inactive / Session",data:y(Math.round(e.stats.timeInactive/e.stats.sessions)),detail:"Total: "+y(e.stats.timeInactive)+" ("+Math.round(100*e.stats.timeInactive/a)+"%)"}],[{header:"Users Online",data:Math.round(100*e.stats.onlineUsers/e.stats.totalUsers)+"%",detail:"".concat(e.stats.onlineUsers," out of ").concat(e.stats.totalUsers),tooltip:""},{header:"Total Messages",data:e.stats.totalMessages,detail:Math.round(e.stats.totalMessages/e.stats.totalUsers)+" messages / user"},{header:"Server",data:"CPU: "+e.stats.cpuUsage+"% - RAM: "+e.stats.freeMemory+"%",detail:"Up for "+y(e.stats.uptime),tooltip:"Shows CPU usage over the last few seconds, and free RAM"},{header:"Avg Sessions / user",data:Math.round(e.stats.sessions/e.stats.totalUsers),detail:"Total sessions: "+e.stats.sessions}]],o=e.stats.rooms;return r.a.createElement(g.a,{fluid:!0},r.a.createElement(E.a,null,r.a.createElement(v.a,null,r.a.createElement(b,{data:e.stats.messages,label:"Realtime Messages"})),r.a.createElement(v.a,null,r.a.createElement(b,{data:e.stats.users,label:"Realtime Users"}))),r.a.createElement(E.a,null,r.a.createElement(v.a,null,r.a.createElement("div",{style:{width:"100%",height:"400px"}},r.a.createElement(_.f,null,r.a.createElement(_.d,{onClick:function(e){if(e){var a=e.activePayload[0].payload.id;t&&t.emit(d.CHANGE_ROOM,{room:a})}},data:o,barSize:10,margin:{top:50,bottom:0,left:0,right:0}},r.a.createElement(_.i,{allowDecimals:!1,domain:[0,10]}),r.a.createElement(_.h,{tick:!1},r.a.createElement(_.e,{value:"Rooms",position:"bottom",offset:-15,fill:"#ccc"})),r.a.createElement(_.c,{dataKey:"active",stackId:"a",fill:"#f75f00"}),r.a.createElement(_.c,{dataKey:"inactive",stackId:"a",fill:"#555"}),r.a.createElement(_.g,{cursor:{fill:"rgba(255, 255, 255, 0.1)"}})))))),r.a.createElement(g.a,{className:"mt-4"},s.map((function(e,t){return r.a.createElement(E.a,{key:t},e.map((function(e){return r.a.createElement(v.a,{key:e.header},r.a.createElement(A,{title:e.header,content:e.data,history:e.detail,tooltip:e.tooltip}))})))}))))},U=function(e){var t=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(e),a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches;if(!t)return"#0000FF";var n=function(e,t,a){var n=[e,t,a].map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return.2126*n[0]+.7152*n[1]+.0722*n[2]}(t.r,t.g,t.b),r=0;return a&&n>=.5?r=-n:!a&&n<.5&&(r=n+.2),r&&function(e,t){var a,n,r,s,o,l,i,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,m=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=parseInt,f=Math.round,p="string"==typeof u;return"number"!=typeof e||e<-1||e>1||"string"!=typeof t||"r"!=t[0]&&"#"!=t[0]||u&&!p?null:(window.pSBCr||(window.pSBCr=function(e){var t=e.length,s={};if(t>9){var o,l;if(o=e=e.split(","),l=Object(c.a)(o,4),a=l[0],n=l[1],r=l[2],p=l[3],(t=e.length)<3||t>4)return null;s.r=d("a"==a[3]?a.slice(5):a.slice(4)),s.g=d(n),s.b=d(r),s.a=p?parseFloat(p):-1}else{if(8==t||6==t||t<4)return null;t<6&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(t>4?e[4]+e[4]:"")),e=d(e.slice(1),16),9==t||5==t?(s.r=e>>24&255,s.g=e>>16&255,s.b=e>>8&255,s.a=f((255&e)/.255)/1e3):(s.r=e>>16,s.g=e>>8&255,s.b=255&e,s.a=-1)}return s}),i=t.length>9,i=p?u.length>9||"c"==u&&!i:i,o=window.pSBCr(t),s=e<0,l=u&&"c"!=u?window.pSBCr(u):s?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},s=1-(e=s?-1*e:e),o&&l?(m?(a=f(s*o.r+e*l.r),n=f(s*o.g+e*l.g),r=f(s*o.b+e*l.b)):(a=f(Math.pow(s*Math.pow(o.r,2)+e*Math.pow(l.r,2),.5)),n=f(Math.pow(s*Math.pow(o.g,2)+e*Math.pow(l.g,2),.5)),r=f(Math.pow(s*Math.pow(o.b,2)+e*Math.pow(l.b,2),.5))),p=o.a,l=l.a,p=(o=p>=0||l>=0)?p<0?l:l<0?p:p*s+l*e:0,i?"rgb"+(o?"a(":"(")+a+","+n+","+r+(o?","+f(1e3*p)/1e3:"")+")":"#"+(4294967296+16777216*a+65536*n+256*r+(o?f(255*p):0)).toString(16).slice(1,o?void 0:-2)):null)}(r,e)||e},R=Object(i.a)((function(e,t){switch(t.type){case"login":if(e.offline||(e.auth.checked=!0),!t.payload){e.auth.loggedIn=!1,e.auth.user=null;break}e.offline=!1,e.auth.loggedIn=!0,e.auth.user=t.payload.user;break;case"offline":e.offline=!0,e.error=null,e.socket.connected=!1;break;case"error":e.error=t.payload;break;case"user_password":e.auth.user&&(e.auth.user.hasPassword=!0);break;case"system_message":var a={uuid:m()(),user:B,content:[t.payload],timestamp:new Date,attributes:{private:!1,draft:!1}};e.messages.push(a);break;case"socket_".concat(d.CONNECT):e.socket.connected=!0,e.offline=!1,e.error=null;break;case"socket_".concat(d.DISCONNECT):e.socket.connected=!1,e.offline=!0,e.error=null;break;case"socket_".concat(d.ONLINE_USERS):e.onlineUsers=t.payload.users.map((function(e){return e.contrastColor=U("#"+e.color),e}));break;case"socket_".concat(d.MESSAGE):var n=t.payload;n.timestamp=new Date(n.timestamp);for(var r=!1,s=-1,o=e.messages.length-1;o>=0;o--){var l=e.messages[o];if(l.attributes.draft||(r=!0),l.attributes.draft&&l.user.user_id===n.user.user_id){s=o;break}}var c=n.content.trim().length<1;if(s>-1)if(r||!n.attributes.draft)e.messages.splice(s,1);else if(!c&&n.attributes.draft)return e.messages[s].content[0]=n.content,void(e.messages[s].timestamp=new Date(n.timestamp));if(c)return;if(n.attributes.replyToId){var i=e.messages.find((function(e){return e.uuid===n.attributes.replyToId}))||null;i&&i.user&&(n.attributes.replyTo=i)}if(!n.attributes.draft){var u=e.messages[e.messages.length-1];if(u&&u.user.user_id===n.user.user_id&&u.attributes.private===n.attributes.private&&u.attributes.replyToId===n.attributes.replyToId)return u.content.push(n.content),void(u.timestamp=new Date(n.timestamp))}var f={uuid:n.uuid,user:n.user,timestamp:n.timestamp,attributes:n.attributes,content:[n.content]};e.messages.push(f),e.messages.length>100&&e.messages.shift();break;case"socket_".concat(d.HISTORY):e.messages=t.payload.map((function(e){return e.timestamp=new Date(e.timestamp),e}));break;case"socket_".concat(d.STATS):e.stats.messages.push(t.payload.messages),e.stats.messages.length>F&&e.stats.messages.shift(),e.stats.users.push(t.payload.users),e.stats.users.length>F&&e.stats.users.shift(),e.stats.rooms=t.payload.rooms,e.stats.onlineUsers=t.payload.users,e.stats.totalUsers=t.payload.totalUsers,e.stats.totalMessages=t.payload.totalMessages,e.stats.cpuUsage=Math.round(100*t.payload.cpuUsage),e.stats.freeMemory=Math.round(100*t.payload.freeMemory),e.stats.uptime=Math.round(t.payload.uptime),e.stats.timeActive=30*t.payload.timeActive,e.stats.timeInactive=30*t.payload.timeInactive,e.stats.sessions=t.payload.sessions;break;case"socket_".concat(d.CONTROL):Object.keys(t.payload).forEach((function(a){"undefined"!==typeof e[a]&&(e[a]=t.payload[a])}));break;case"chat_focus":e.chat.focused=t.payload}})),B={user_id:"dotdot",name:"dotdot",icon:"cog",color:"f75f00",isActive:!0,hasPassword:!0},P={auth:{checked:!1,loggedIn:!1,user:null},socket:{connected:!1},draftTimer:100,onlineUsers:[],messages:[],stats:{messages:new Array(F).fill(0),users:new Array(F).fill(0),rooms:[],onlineUsers:0,totalUsers:0,totalMessages:0,cpuUsage:0,freeMemory:0,uptime:0,timeActive:0,timeInactive:0,sessions:1},offline:!1,error:null,chat:{focused:!1}},D=r.a.createContext({state:P,dispatch:function(){return console.warn("Using default reducer, check StateProvider"),P}}),H=function(e){var t=r.a.useReducer(R,e.state||P),a=Object(c.a)(t,2),n={state:a[0],dispatch:a[1]};return r.a.createElement(D.Provider,{value:n},e.children)},W=function(){return r.a.useContext(D)},G=W,z=a(53),Z=a(17),Y=a(271),K=a.n(Y),X=a(91),q=a.n(X),V=function(e){var t={};return e.infinite&&(t.animationIterationCount="infinite",t.animationDirection="alternate"),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:q.a.logo},r.a.createElement("div",{className:q.a.blob,style:t}),r.a.createElement("div",{className:q.a.blob,style:t})),r.a.createElement("svg",{className:q.a.svgFilter,xmlns:"http://www.w3.org/2000/svg",version:"1.1"},r.a.createElement("defs",null,r.a.createElement("filter",{id:"goo"},r.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),r.a.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),r.a.createElement("feBlend",{in:"SourceGraphic",in2:"goo"})))))},J=function(e){return r.a.createElement("div",{style:{position:"absolute",top:"45%",left:"50%",transform:"translateX(-50%) translateY(-50%)"}},r.a.createElement(V,{infinite:!0}))},Q=a(162),$=a.n(Q),ee=function(e){var t=e.className,a="light"===e.theme?"282B2D":"F3F3F3";return r.a.createElement("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"717",height:"139",viewBox:"0 0 717 139"},r.a.createElement("defs",null,r.a.createElement("path",{id:"main-black-a",d:"M29.0928934,85.7089474 C35.276613,85.7089474 40.4425154,84.2681579 44.5906006,81.3865789 C45.0197129,81.0884846 45.4378302,80.7792888 45.8449525,80.4589915 L45.9155783,80.402 L45.9156834,83.98 L59.7426341,83.98 L59.7426341,0.99052624 L43.9568654,0.99052624 L43.9562341,23.746 L43.6237812,23.5352083 C39.952661,21.2683262 35.567712,20.0944052 30.468934,20.0134451 L29.8994655,20.0089473 C23.9461951,20.0089473 18.7610886,21.4305263 14.344146,24.2736842 C9.9272034,27.1168421 6.49927187,31.0069736 4.0603514,35.9440789 C1.62143093,40.8811842 0.401970697,46.5194736 0.401970697,52.8589473 C0.401970697,59.0831579 1.60222683,64.673421 4.00273911,69.6297368 C6.40325138,74.5860526 9.75436651,78.505 14.0560845,81.3865789 C18.3578025,84.2681579 23.3700721,85.7089474 29.0928934,85.7089474 Z M31.6278343,71.7621053 C28.2479131,71.7621053 25.4825229,70.9168421 23.3316639,69.2263158 C21.1808049,67.5357895 19.5868648,65.2593421 18.5498435,62.3969737 C17.5128222,59.5346052 16.9943115,56.3552631 16.9943115,52.8589473 C16.9943115,49.4010526 17.5320263,46.240921 18.6074558,43.3785526 C19.6828853,40.5161842 21.3440398,38.2301315 23.5909193,36.5203947 C25.8377987,34.8106578 28.7088114,33.9557894 32.2039573,33.9557894 C35.468654,33.9557894 38.1092175,34.743421 40.1256478,36.3186842 C42.1420781,37.8939473 43.6111916,40.1031579 44.5329883,42.9463158 C45.454785,45.7894736 45.9156834,49.0936842 45.9156834,52.8589473 C45.9156834,56.6242105 45.454785,59.928421 44.5329883,62.7715789 C43.6111916,65.6147368 42.1036699,67.8239474 40.0104232,69.3992105 C37.9171765,70.9744737 35.1229802,71.7621053 31.6278343,71.7621053 Z M102.374154,85.7089474 C108.596281,85.7089474 114.079051,84.3161842 118.822464,81.5306579 C123.565876,78.7451316 127.272267,74.8838158 129.941637,69.9467105 C132.611006,65.0096052 133.945691,59.3136842 133.945691,52.8589473 C133.945691,46.4426315 132.620608,40.765921 129.970443,35.8288157 C127.320277,30.8917105 123.623488,27.0207894 118.880076,24.2160526 C114.136664,21.4113157 108.63469,20.0089473 102.374154,20.0089473 C96.2288422,20.0089473 90.7940824,21.3921052 86.0698743,24.158421 C81.3456661,26.9247368 77.6392752,30.7764473 74.9507014,35.7135526 C72.2621277,40.6506579 70.9178408,46.3657894 70.9178408,52.8589473 C70.9178408,59.2752631 72.2333215,64.9519737 74.864283,69.8890789 C77.4952444,74.8261842 81.1728292,78.6971053 85.8970374,81.5018421 C90.6212455,84.3065789 96.1136176,85.7089474 102.374154,85.7089474 Z M102.374154,71.0705263 C97.4963127,71.0705263 93.7995238,69.4280263 91.2837869,66.1430263 C88.7680501,62.8580263 87.5101816,58.43 87.5101816,52.8589473 C87.5101816,49.2473684 88.0382943,46.0776315 89.0945197,43.3497368 C90.1507451,40.6218421 91.7734914,38.4894736 93.9627586,36.9526315 C96.1520258,35.4157894 98.9558242,34.6473684 102.374154,34.6473684 C107.328811,34.6473684 111.064008,36.2994736 113.579745,39.6036842 C116.095482,42.9078947 117.35335,47.3263158 117.35335,52.8589473 C117.35335,58.1994737 116.114686,62.5698684 113.637357,65.9701316 C111.160029,69.3703947 107.405627,71.0705263 102.374154,71.0705263 Z M170.807431,85.0461842 C174.936312,85.1422368 179.151612,84.7868421 183.45333,83.98 L183.45333,83.98 L183.45333,70.9552631 C179.766143,71.4547368 176.405426,71.608421 173.371178,71.4163158 C170.336931,71.2242105 168.12846,70.0331579 166.745765,67.8431579 C166.016009,66.6905263 165.622325,65.1440789 165.564713,63.2038158 C165.5071,61.2635526 165.478294,59.0831579 165.478294,56.6626316 L165.478294,56.6626316 L165.477558,33.841 L183.45333,33.8405263 L183.45333,21.7378947 L165.477558,21.738 L165.478294,4.44842098 L149.80775,4.44842098 L149.806803,21.738 L139.207088,21.7378947 L139.207088,33.8405263 L149.806803,33.841 L149.80775,57.5847368 C149.80775,61.0248988 149.840477,64.1295017 149.90593,66.8985456 L149.922975,67.5838158 C149.999791,70.5230263 150.806363,73.4142105 152.342691,76.2573684 C154.032652,79.2926316 156.500378,81.4922368 159.745871,82.8561842 C162.991363,84.2201316 166.67855,84.9501316 170.807431,85.0461842 Z M222.556557,85.7089474 C228.740277,85.7089474 233.906179,84.2681579 238.054264,81.3865789 C238.483376,81.0884846 238.901494,80.7792888 239.308616,80.4589915 L239.378821,80.402 L239.379347,83.98 L253.206298,83.98 L253.206298,0.99052624 L237.420529,0.99052624 L237.420476,23.747 L237.087445,23.5352083 C233.416325,21.2683262 229.031375,20.0944052 223.932597,20.0134451 L223.363129,20.0089473 C217.409859,20.0089473 212.224752,21.4305263 207.807809,24.2736842 C203.390867,27.1168421 199.962935,31.0069736 197.524015,35.9440789 C195.085094,40.8811842 193.865634,46.5194736 193.865634,52.8589473 C193.865634,59.0831579 195.06589,64.673421 197.466403,69.6297368 C199.866915,74.5860526 203.21803,78.505 207.519748,81.3865789 C211.821466,84.2681579 216.833736,85.7089474 222.556557,85.7089474 Z M225.091498,71.7621053 C221.711577,71.7621053 218.946186,70.9168421 216.795327,69.2263158 C214.644468,67.5357895 213.050528,65.2593421 212.013507,62.3969737 C210.976486,59.5346052 210.457975,56.3552631 210.457975,52.8589473 C210.457975,49.4010526 210.99569,46.240921 212.071119,43.3785526 C213.146549,40.5161842 214.807703,38.2301315 217.054583,36.5203947 C219.301462,34.8106578 222.172475,33.9557894 225.667621,33.9557894 C228.932317,33.9557894 231.572881,34.743421 233.589311,36.3186842 C235.605742,37.8939473 237.074855,40.1031579 237.996652,42.9463158 C238.918449,45.7894736 239.379347,49.0936842 239.379347,52.8589473 C239.379347,56.6242105 238.918449,59.928421 237.996652,62.7715789 C237.074855,65.6147368 235.567333,67.8239474 233.474087,69.3992105 C231.38084,70.9744737 228.586644,71.7621053 225.091498,71.7621053 Z M295.837817,85.7089474 C302.059945,85.7089474 307.542715,84.3161842 312.286127,81.5306579 C317.029539,78.7451316 320.73593,74.8838158 323.4053,69.9467105 C326.07467,65.0096052 327.409355,59.3136842 327.409355,52.8589473 C327.409355,46.4426315 326.084272,40.765921 323.434106,35.8288157 C320.783941,30.8917105 317.087152,27.0207894 312.34374,24.2160526 C307.600327,21.4113157 302.098353,20.0089473 295.837817,20.0089473 C289.692506,20.0089473 284.257746,21.3921052 279.533538,24.158421 C274.80933,26.9247368 271.102939,30.7764473 268.414365,35.7135526 C265.725791,40.6506579 264.381504,46.3657894 264.381504,52.8589473 C264.381504,59.2752631 265.696985,64.9519737 268.327947,69.8890789 C270.958908,74.8261842 274.636493,78.6971053 279.360701,81.5018421 C284.084909,84.3065789 289.577281,85.7089474 295.837817,85.7089474 Z M295.837817,71.0705263 C290.959976,71.0705263 287.263187,69.4280263 284.74745,66.1430263 C282.231714,62.8580263 280.973845,58.43 280.973845,52.8589473 C280.973845,49.2473684 281.501958,46.0776315 282.558183,43.3497368 C283.614409,40.6218421 285.237155,38.4894736 287.426422,36.9526315 C289.615689,35.4157894 292.419488,34.6473684 295.837817,34.6473684 C300.792474,34.6473684 304.527672,36.2994736 307.043408,39.6036842 C309.559145,42.9078947 310.817014,47.3263158 310.817014,52.8589473 C310.817014,58.1994737 309.578349,62.5698684 307.101021,65.9701316 C304.623692,69.3703947 300.869291,71.0705263 295.837817,71.0705263 Z M364.271095,85.0461842 C368.399976,85.1422368 372.615276,84.7868421 376.916994,83.98 L376.916994,83.98 L376.916994,70.9552631 C373.229807,71.4547368 369.86909,71.608421 366.834842,71.4163158 C363.800594,71.2242105 361.592123,70.0331579 360.209428,67.8431579 C359.479672,66.6905263 359.085988,65.1440789 359.028376,63.2038158 C358.970764,61.2635526 358.941958,59.0831579 358.941958,56.6626316 L358.941958,56.6626316 L358.9418,33.841 L376.916994,33.8405263 L376.916994,21.7378947 L358.9418,21.738 L358.941958,4.44842098 L343.271414,4.44842098 L343.271045,21.738 L332.670751,21.7378947 L332.670751,33.8405263 L343.271045,33.841 L343.271414,57.5847368 C343.271414,61.0248988 343.30414,64.1295017 343.369593,66.8985456 L343.386638,67.5838158 C343.463455,70.5230263 344.270027,73.4142105 345.806354,76.2573684 C347.496315,79.2926316 349.964042,81.4922368 353.209534,82.8561842 C356.455027,84.2201316 360.142214,84.9501316 364.271095,85.0461842 Z"})),r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("g",{transform:"translate(339.337 25.02)"},r.a.createElement("mask",{id:"main-black-b",fill:"#fff"},r.a.createElement("use",{xlinkHref:"#main-black-a"})),r.a.createElement("use",{fill:"#FFF",fillRule:"nonzero",opacity:".9",xlinkHref:"#main-black-a"}),r.a.createElement("g",{fill:"#".concat(a),mask:"url(#main-black-b)"},r.a.createElement("rect",{width:"377.177",height:"86.18",transform:"translate(0 -.158)"}))),r.a.createElement("g",{transform:"translate(0 1)"},r.a.createElement("ellipse",{cx:"217.427",cy:"69.5",fill:"#FF5151",rx:"67.477",ry:"67.5"}),r.a.createElement("ellipse",{cx:"67.477",cy:"67.5",fill:"#4DCBC3",rx:"67.477",ry:"67.5"}))))},te=a(272),ae=a.n(te),ne=function(e){var t=e.children;return r.a.createElement("div",{className:ae.a.wrapper},t)},re=a(92),se=a.n(re),oe=a(77),le=a.n(oe),ce=function(e){var t=e.onClick,a=(e.small,G().state);if(!a.auth.user)return r.a.createElement(r.a.Fragment,null);var n=a.auth.user&&a.auth.user.hasPassword,s=n?"lock":"lock-open";return r.a.createElement("button",{className:le.a.badge,onClick:t},r.a.createElement("span",{className:le.a.dot,style:{color:"#".concat(a.auth.user.color)}},r.a.createElement(N.a,{icon:a.auth.user.icon||"circle"})),r.a.createElement("span",{className:le.a.name},a.auth.user.name),r.a.createElement(N.a,{className:j()(le.a.lock,Object(Z.a)({},le.a.closed,n)),icon:s}))},ie=a(163),ue=a.n(ie),me=function(){return r.a.createElement(l.b,{className:ue.a.badge,to:"/admin",title:"Monitoring",style:{marginLeft:"1em"}},r.a.createElement(N.a,{className:ue.a.icon,icon:"shield-alt"}))},de=a(652),fe=a(653),pe=a(655),he=a(93),ge=a.n(he),Ee=a(166),ve=a(167),_e=a.n(ve),be="";_e.a.defaults.withCredentials=!0;var ye=function(){var e=Object(Ee.a)(ge.a.mark((function e(t,a,n){var r,s,o;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("'url' is required for fetching data");case 2:return r="".concat(f).concat(t),s={url:r,method:a,data:n,timeout:6e3,withCredentials:!0,xsrfHeaderName:"x-csrf-token",headers:{}},be.length>0&&(s.headers["x-csrf-token"]=be),e.prev=5,e.next=8,_e()(s);case 8:return(o=e.sent).headers["x-csrf-token"]&&(be=o.headers["x-csrf-token"]),e.next=12,o.data;case 12:return e.abrupt("return",e.sent);case 15:if(e.prev=15,e.t0=e.catch(5),!e.t0.response){e.next=21;break}throw console.warn("useFetch error on ".concat(a," ").concat(t),e.t0.response),{status:e.t0.response.status,message:Ce(e.t0),errors:we(e.t0),data:e.t0.response.data};case 21:throw console.warn("useFetch network error on ".concat(a," ").concat(t),e.t0),{status:500,message:e.t0.message,errors:[e.t0.message]};case 24:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,a,n){return e.apply(this,arguments)}}();function Ce(e){return e.response&&e.response.data?we(e).join(". "):e.message||"An error occurred"}function we(e){return e.response&&e.response.data?function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++){var a=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];if(Array.isArray(a))return a;if("string"===typeof a)return[a]}return[e]}("An error occurred",e.response.data,e.response.data.errors,e.response.data.error):[e.message||"An error occurred"]}var ke=a(168),Oe=a.n(ke),Me=function(e){var t=e.show,a=e.onHide,s=G(),o=s.state,l=s.dispatch,i=Object(n.useState)(!1),u=Object(c.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(""),h=Object(c.a)(p,2),g=h[0],E=h[1],v=Object(n.useState)(""),_=Object(c.a)(v,2),b=_[0],y=_[1],C="Claim Username";o.auth.user&&o.auth.user.hasPassword&&(C="Update Password");return r.a.createElement(de.a,{show:t,onHide:a},r.a.createElement(fe.a,{noValidate:!0,validated:m,onSubmit:function(e){(e.preventDefault(),e.stopPropagation(),d(!0),e.currentTarget.checkValidity())&&ye("/password","POST",{password:g,repeatPassword:b}).then((function(){l({type:"user_password",payload:!0}),a(),d(!1),E(""),y("")})).catch((function(e){l({type:"error",payload:e.errors.join(", ")})}))}},r.a.createElement(de.a.Header,{closeButton:!0},r.a.createElement(de.a.Title,null,C)),r.a.createElement(de.a.Body,null,r.a.createElement(fe.a.Group,{controlId:"pwd.new"},r.a.createElement(fe.a.Control,{as:"input",type:"password",autoComplete:"new-password",placeholder:"Password...",autoFocus:!0,required:!0,minLength:6,onChange:function(e){E(e.currentTarget.value)},value:g}),r.a.createElement(fe.a.Control.Feedback,{type:"invalid"},"The password is too short. Minimum length is 6 characters.")),r.a.createElement(fe.a.Group,{controlId:"pwd.new"},r.a.createElement(fe.a.Control,{as:"input",type:"password",autoComplete:"new-password",placeholder:"Repeat Password...",required:!0,minLength:6,pattern:g,onChange:function(e){y(e.currentTarget.value)},value:b}),r.a.createElement(fe.a.Control.Feedback,{type:"invalid"},"The passwords don't match!"))),r.a.createElement(de.a.Footer,{className:Oe.a.footer},r.a.createElement("a",{href:"".concat(f,"/logout"),className:j()(Oe.a.left,"text-danger")},"Logout"),r.a.createElement(pe.a,{type:"submit",variant:"primary"},"Set password"))))},je=function(e){e.children;var t=G().state,a=Object(n.useState)(!1),s=Object(c.a)(a,2),o=s[0],l=s[1],i="Set a password to keep your username";return t.auth.user&&t.auth.user.hasPassword&&(i="Change your password"),r.a.createElement(r.a.Fragment,null,t.auth.user&&t.auth.user.isAdmin&&r.a.createElement(me,null),r.a.createElement(T.a,{placement:"bottom",delay:500,overlay:r.a.createElement(x.a,{id:"passwordLock"},i)},r.a.createElement(ce,{onClick:function(){return l(!0)}})),r.a.createElement(Me,{show:o,onHide:function(){return l(!1)}}))},Ne=a(169),xe=a.n(Ne),Te=function(e){var t=e.user,a=G().state,n=a.auth.user&&t.user_id===a.auth.user.user_id,s="circle",o="";t.icon?s=t.icon:n&&(s="dot-circle"),t.isActive||(s="meh",o=" (away)");var l=s;n&&(l=["far",s]);var c=t.contrastColor||"#".concat(t.color);return r.a.createElement(T.a,{key:t.user_id,placement:"bottom",overlay:r.a.createElement(x.a,{id:"user-".concat(t.user_id)},"@",t.name,o)},r.a.createElement(N.a,{style:{color:c},icon:l}))},Le=function(){var e=G().state;return r.a.createElement("div",{className:xe.a.onlineUsers},r.a.createElement("span",{className:xe.a.count},e.onlineUsers.length),e.onlineUsers.map((function(e){return r.a.createElement(Te,{user:e,key:e.user_id})})))},Se=function(e){var t=e.scrollingWhileFocused,a=t?window.pageYOffset+"px":0,n=t?"absolute":"fixed",s=window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";return r.a.createElement("header",{className:se.a.header,style:{position:n,top:a}},r.a.createElement(ne,null,r.a.createElement(ee,{className:se.a.logo,theme:s}),r.a.createElement("div",{className:se.a.online},r.a.createElement(Le,null)),r.a.createElement("div",{className:se.a.badge},r.a.createElement(je,null))))},Ae=a(32),Fe=a(20),Ie=a.n(Fe),Ue=a(274),Re=a.n(Ue),Be=a(275),Pe=a.n(Be),De=a(651),He=function(){return r.a.createElement("div",null,r.a.createElement("h4",null,"Welcome to dotdot"),r.a.createElement("p",null,"This is a place where you can chat with people whenever you want :)",r.a.createElement("br",null),"We don't save any messages, so when the last person in a chat disconnects, the chat history is lost."),r.a.createElement("p",null,"Inactive user accounts are deleted after 2 weeks without chatting."),r.a.createElement("h6",null,"Keep your User"),r.a.createElement("p",null,"You can set a password to protect your username from being deleted and used by someone else. Simply click on the lock in the top right corner."),r.a.createElement("h6",null,"Private Messages"),r.a.createElement("p",null,"You can send anyone a private message simply by starting your message with @ and their name. You'll see the text box change to orange and a lock icon appear."),r.a.createElement("p",null,"Only you and the person you send the message to can see them. If they are offline they won't receive the message"),r.a.createElement("h5",null,"Commands"),r.a.createElement("p",null,"There are some commands that you can use:"),r.a.createElement(De.a,{size:"sm",variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Command"),r.a.createElement("th",null,"Example"),r.a.createElement("th",null,"Description"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("code",null,"/help")),r.a.createElement("td",null,r.a.createElement("code",null,"/help")),r.a.createElement("td",null,"It shows this message")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("code",null,"/set color")),r.a.createElement("td",null,r.a.createElement("code",null,"/set color eb0000")),r.a.createElement("td",null,"Change your color, the color needs to be a hex representation (sorry if this sounds confusing, soon there will be an easier way to do this)")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("code",null,"/set icon")),r.a.createElement("td",null,r.a.createElement("code",null,"/set icon smile")),r.a.createElement("td",null,"Change your icon, pick any of the ones from"," ",r.a.createElement("a",{href:"https://fontawesome.com/icons?d=gallery&s=regular&c=emoji&m=free",rel:"noopener noreferrer",target:"_blank"},"this list"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("code",null,"/list users")),r.a.createElement("td",null,r.a.createElement("code",null,"/list users")),r.a.createElement("td",null,"Get a list of the users who are currently online")))))},We=a(170),Ge=a.n(We),ze=a(60),Ze=a.n(ze),Ye=function(e){var t=e.url,a=Object(Ae.a)({loading:!1,url:t,result:null}),s=Object(c.a)(a,2),o=s[0],l=s[1];if(Object(n.useEffect)((function(){l((function(e){e.loading=!0})),ye("/unfurl","POST",{url:t}).then((function(e){l((function(t){t.loading=!1,t.result={title:e.title,description:e.description,favicon:e.favicon,embed:null,provider:null,type:null,author_name:null,author_url:null},e.open_graph&&(t.url=e.open_graph.url),e.oEmbed&&(t.result.type=e.oEmbed.type,t.result.provider=e.oEmbed.provider_name,t.result.author_name=e.oEmbed.author_name,t.result.author_url=e.oEmbed.author_url),e.twitter_card&&(t.url=e.twitter_card.url,e.twitter_card.players&&e.twitter_card.players.length>0&&(t.result.embed=e.twitter_card.players[0].url,"video"!==t.result.type&&(t.result.type=e.twitter_card.site)))}))})).catch((function(e){l((function(e){e.loading=!0,e.result=null}))}))}),[t,l]),o.loading||!o.result)return null;var i=null;switch(o.result.type){case"video":case"@spotify":case"SoundCloud":if(!o.result.embed)return null;i=r.a.createElement("div",null,r.a.createElement("div",{className:"embed-responsive embed-responsive-".concat({video:"16by9","@spotify":"21by9",SoundCloud:"21by9"}[o.result.type])},r.a.createElement("iframe",{className:"embed-responsive-item",src:o.result.embed,title:o.result.title,allowFullScreen:!0,width:"640",height:"320"})),r.a.createElement("h4",null,r.a.createElement("a",{href:t,rel:"noopener noreferrer",target:"_blank",title:o.result.description},o.result.favicon&&r.a.createElement("img",{className:Ze.a.icon,src:o.result.favicon,alt:o.result.title}),o.result.title," ",r.a.createElement(N.a,{icon:"external-link-alt"})),r.a.createElement("div",{className:Ze.a.description},o.result.description),o.result.author_url&&o.result.author_name&&r.a.createElement("div",{className:Ze.a.author},"By"," ",r.a.createElement("a",{href:o.result.author_url},"@",o.result.author_name))));break;default:i=r.a.createElement("div",null,r.a.createElement("a",{href:t,rel:"noopener noreferrer",target:"_blank",title:o.result.description},o.result.favicon&&r.a.createElement("img",{className:Ze.a.icon,src:o.result.favicon,alt:o.result.title}),o.result.title," ",r.a.createElement(N.a,{icon:"external-link-alt"})),o.result.description&&r.a.createElement("div",{className:Ze.a.description},o.result.description))}return i?r.a.createElement("blockquote",{className:Ze.a.embed},i):null},Ke=new RegExp("@([A-Za-z0-9]+(?:[_][A-Za-z0-9]+)*_?)","gmi"),Xe=new RegExp(/((?:ftp|http|https):\/\/(?:\w+:{0,1}\w*@)?(?:\S+)(?::[0-9]+)?(?:\/|\/(?:[\w#!:.?+=&%@!\-/]))?)/,"gmi"),qe=function(e){var t=e.content,a=e.isSystem,s=e.onlineUsers,o=t,l=[];if(a&&"/help"===t)o=r.a.createElement(He,null);else{var c=o.match(Xe);c&&c.forEach((function(e){l.includes(e)||l.push(e)})),o=Re()(o,Ke,(function(e,t){var a={},n=s.find((function(t){return t.name===e}));return n&&(a.color=n.contrastColor||"#"+n.color),r.a.createElement("span",{key:t,className:Ge.a.mention,style:a},"@",e)})).map((function(e,t){return"string"!==typeof e?e:r.a.createElement(Pe.a,{key:t,source:e,unwrapDisallowed:!0,allowedTypes:["text","link","blockquote","code","strong","emphasis","delete","image","inlineCode"]})}))}var i=Object(n.useMemo)((function(){return l.map((function(e){return r.a.createElement(Ye,{key:e,url:e})}))}),[l]);return r.a.createElement("div",{className:Ge.a.messageContent},o,i)},Ve=function(e){var t=e.user,a=e.timestamp,n=e.isDraft,s=e.isPrivate,o=e.isOnline,l=e.isCurrentUser,c=t.contrastColor||"#".concat(t.color),i="dotdot"===t.user_id,u="circle";t.icon?u=t.icon:l&&(u="dot-circle"),i?u="cog":n?u="circle-notch":s?u="lock":o||(u="meh");var m=u;return l&&(m=["far",u]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:j()(Ie.a.icon,Object(Z.a)({},Ie.a.private,s)),style:{color:c,background:c}},s&&r.a.createElement(T.a,{placement:"right",overlay:r.a.createElement(x.a,{id:"user-".concat(t.user_id)},"Private message from ",r.a.createElement("b",null,"@",t.name),r.a.createElement("br",null),"Only you can see this.")},r.a.createElement(N.a,{icon:m})),!s&&r.a.createElement(N.a,{icon:m,spin:n})),r.a.createElement("div",{className:j()(Ie.a.user)},r.a.createElement("span",{style:{color:c}},t.name),!n&&r.a.createElement("span",{className:j()(Ie.a.timestamp)},a.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}))))},Je=function(e){var t=e.replyTo,a=e.replyToId;return t&&t.user?r.a.createElement("a",{href:"#message-"+a,className:Ie.a.replyBox,title:"Go to original message",style:{borderLeftColor:"#".concat(t.user.color)}},r.a.createElement(Qe,{reply:!0,message:t})):null},Qe=r.a.memo((function(e){var t,a,s=e.message,o=e.onClick,l=e.reply,c=G().state;Object(n.useEffect)((function(){console.log("first render: messageComponent")}),[]);var i,u=c.onlineUsers.find((function(e){return e.user_id===s.user.user_id}))||s.user,m="dotdot"===u.user_id,d=m||c.onlineUsers.findIndex((function(e){return e.user_id===u.user_id}))>-1,f=!l&&o&&!m&&!s.attributes.draft;return i=l?s.content.join(". "):s.content.map((function(e){return r.a.createElement(qe,{content:e,isSystem:m,onlineUsers:c.onlineUsers,key:e})})),r.a.createElement("div",{id:"message-"+s.uuid,className:j()(Ie.a.message,(t={},Object(Z.a)(t,Ie.a.reply,l),Object(Z.a)(t,Ie.a.system,m),Object(Z.a)(t,Ie.a.offline,!d),Object(Z.a)(t,Ie.a.inactive,!u.isActive),Object(Z.a)(t,Ie.a.draft,s.attributes.draft),Object(Z.a)(t,Ie.a.private,s.attributes.private),t))},f&&r.a.createElement("div",{className:Ie.a.replyButton},r.a.createElement(pe.a,{variant:"link",onClick:function(){f&&o&&o(s.uuid)},title:"Reply to this message"},r.a.createElement(N.a,{icon:"reply"})," Reply")),r.a.createElement(Ve,{user:u,timestamp:s.timestamp,isOnline:d,isDraft:s.attributes.draft,isPrivate:s.attributes.private,isCurrentUser:u.user_id===(null===(a=c.auth.user)||void 0===a?void 0:a.user_id)}),!l&&r.a.createElement(Je,{replyTo:s.attributes.replyTo,replyToId:s.attributes.replyToId}),r.a.createElement("div",{className:j()(Ie.a.body)},i))})),$e=a(94),et=a.n($e),tt=function(e){var t=e.boxRef,a=e.onScrollChanged,s=e.threshold,o=e.children,l=Object(n.useState)(-1),i=Object(c.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(0),f=Object(c.a)(d,2),p=f[0],h=f[1],g=Object(n.useRef)(null),E=Object(n.useCallback)((function(e){clearTimeout(g.current),a&&(g.current=setTimeout((function(){a(e)}),150))}),[a]),v=Object(n.useCallback)((function(){if(t&&t.current){var e=t.current.scrollHeight-t.current.offsetHeight;t.current.scrollTop=e,m(t.current.scrollTop),E(!0)}}),[t,E,m]),_=Object(n.useCallback)((function(e){return function(){if(t&&t.current){if(u>0){var a=s||200;if(u>0&&Math.abs(t.current.scrollTop-u)>a)return void E(!1);E(!0)}e&&v()}}}),[t,E,s,v,u]);return Object(n.useEffect)((function(){return window.addEventListener("resize",v,!0),t&&t.current&&t.current.addEventListener("scroll",_(!1),!0),function(){window.removeEventListener("resize",v,!0)}}),[t,v,_]),Object(n.useEffect)((function(){if(t.current){var e=t.current.scrollHeight;e!==p&&(h(e),_(!0)())}}),[t,p,_,o]),r.a.createElement(r.a.Fragment,null,o)},at=function(e){var t=G().state,a=Object(Ae.a)({scrollAtBottom:!0,unseenMessages:!1}),s=Object(c.a)(a,2),o=s[0],l=s[1],i=Object(n.useRef)(null),u=Object(n.useCallback)((function(e){l((function(t){t.scrollAtBottom=e,e&&(t.unseenMessages=!1)}))}),[l]),m=Object(n.useCallback)((function(){if(i&&i.current){var e=i.current.scrollHeight-i.current.offsetHeight;i.current.scrollTop=e,l((function(e){e.unseenMessages=!1}))}}),[l]);return Object(n.useEffect)((function(){l((function(e){e.unseenMessages=!e.scrollAtBottom}))}),[t.messages,l]),r.a.createElement("div",{className:et.a.messages,ref:i},o.unseenMessages&&r.a.createElement("div",{className:j()(et.a.unseen)},r.a.createElement(g.a,{className:et.a.unseenContainer},r.a.createElement(pe.a,{variant:"secondary",size:"sm",onClick:m},r.a.createElement(N.a,{icon:"arrow-alt-circle-down"})," New messages"))),r.a.createElement("div",{className:j()(et.a.messageScroll)},r.a.createElement("div",{className:"container"},r.a.createElement(tt,{boxRef:i,onScrollChanged:u},t.messages.map((function(t){return r.a.createElement(Qe,{key:t.uuid,onClick:e.onMessageClick,message:t})}))))))},nt=a(171),rt=a.n(nt),st=function(e){var t=e.replyTo,a=e.onCancelReply;return r.a.createElement("div",{className:rt.a.reply,style:{borderLeftColor:"#".concat(t.user.color)}},r.a.createElement("div",{className:rt.a.actions},r.a.createElement(pe.a,{variant:"link",onClick:a},r.a.createElement(N.a,{icon:"times"}))),r.a.createElement(Qe,{reply:!0,message:t}))},ot=a(61),lt=a.n(ot),ct=function(e){var t,a=e.value,n=e.kind,s=e.inputRef,o=e.onChange,l=e.children,c=G(),i=c.state,u=c.dispatch,m=function(e){return function(){u({type:"chat_focus",payload:e})}};return r.a.createElement("div",{className:j()(lt.a.field,(t={},Object(Z.a)(t,lt.a.focused,i.chat.focused),Object(Z.a)(t,lt.a.private,"private"===n),Object(Z.a)(t,lt.a.command,"command"===n),t))},r.a.createElement(fe.a.Control,{ref:s,className:lt.a.inputArea,onChange:o,onFocus:m(!0),onBlur:m(!1),value:a,autoFocus:!0,as:"input",type:"text",autoComplete:"off",placeholder:"Type a message..."}),r.a.createElement("div",{className:lt.a.actions},l))},it=a(276),ut=a.n(it),mt=function(e){var t=e.disabled;return r.a.createElement(pe.a,{className:ut.a.button,type:"submit",disabled:t},r.a.createElement(N.a,{icon:"paper-plane"}))},dt=a(95),ft=a.n(dt),pt=function(e){var t,a=e.onHelp,n=e.kind,s="question-circle";"command"===n?s="code":"private"===n&&(s="eye-slash");return r.a.createElement("div",{className:j()(ft.a.textIcon,(t={},Object(Z.a)(t,ft.a.interactive,!1===n),Object(Z.a)(t,ft.a.private,"private"===n),Object(Z.a)(t,ft.a.command,"command"===n),t)),onClick:function(){"question-circle"===s&&a()}},r.a.createElement(N.a,{icon:s}))},ht=a(172),gt=a.n(ht),Et=function(e){var t=e.replyTo,a=e.onCancelReply,s=G(),o=s.state,l=s.dispatch,i=Object(Ae.a)({message:"",kind:!1,to:null}),u=Object(c.a)(i,2),m=u[0],f=u[1],h=Object(n.useRef)(null),E=Object(n.useRef)(null),v=Object(n.useContext)(k).socket,_=function(){l({type:"system_message",payload:"/help"})},b=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a||!(e.length<1||e.trim().length<1)){if("/help"===e)return _();var n=d.MESSAGE;"command"===m.kind&&(n=d.COMMAND);var r={content:e,attributes:{draft:a,private:"private"===m.kind,to:m.to,replyToId:t?t.uuid:null}};null===v||void 0===v||v.emit(n,r)}},y=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(pt,{kind:m.kind,onHelp:_}),r.a.createElement(mt,{disabled:!o.chat.focused}))};return r.a.createElement("div",{className:gt.a.footer},r.a.createElement(g.a,{className:gt.a.container},t&&r.a.createElement(st,{replyTo:t,onCancelReply:a}),r.a.createElement(fe.a,{noValidate:!0,onSubmit:function(e){e.preventDefault(),m.message.length<1||m.message.trim().length<1||(b(m.message),f((function(e){e.message="",e.kind=!1})),setTimeout((function(){E.current&&E.current.focus()})),a&&a())}},r.a.createElement(ct,{inputRef:E,kind:m.kind,value:m.message,onChange:function(e){e.preventDefault(),clearTimeout(h.current);var t,a=e.currentTarget.value,n=function(e){return"/"===e[0]}(t=a)?"command":!!function(e){return"@"===e[0]}(t)&&"private";f((function(e){e.message=a,e.kind=n,e.to="private"===n?function(e){var t=e.split(" ");return t.length>0&&"@"===t[0][0]&&p.test(t[0].substr(1))?t[0].substr(1):null}(a):null})),n||o.draftTimer>0&&(h.current=setTimeout((function(){b(a,!0)}),o.draftTimer))}},r.a.createElement(y,null)))))};K.a.polyfill();var vt=function(){var e=W().state,t=Object(Ae.a)({scrollingWhileFocused:!1,replyTo:null}),a=Object(c.a)(t,2),s=a[0],o=a[1],l=Object(n.useCallback)((function(t){o((function(a){var n=e.messages.find((function(e){return e.uuid===t}))||null;a.replyTo=n}))}),[e.messages,o]),i=Object(n.useCallback)((function(){o((function(e){e.replyTo=null}))}),[o]),u=Object(n.useCallback)((function(){o((function(t){e.chat.focused&&(t.scrollingWhileFocused=!0)}))}),[o]);return Object(n.useEffect)((function(){return window.addEventListener("scroll",u,!0),function(){window.removeEventListener("scroll",u)}}),[u]),Object(n.useEffect)((function(){e.chat.focused?u():o((function(e){e.scrollingWhileFocused=!1}))}),[o,u,e.chat.focused]),e.socket.connected?r.a.createElement("div",{className:j()($.a.chat,Object(Z.a)({},$.a.scrollingChat,s.scrollingWhileFocused))},r.a.createElement(Se,{scrollingWhileFocused:s.scrollingWhileFocused}),r.a.createElement(at,{onMessageClick:l}),r.a.createElement(Et,{replyTo:s.replyTo,onCancelReply:i})):r.a.createElement(J,null)},_t=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,null))},bt=function(e){var t=W().state;return t.auth.checked?t.auth.loggedIn?r.a.createElement(z.b,{path:e.path,exact:e.exact,component:e.component}):r.a.createElement(z.a,{to:"/login"}):r.a.createElement(_t,null)},yt=function(e){var t=W().state;return t.auth.checked?t.auth.loggedIn?r.a.createElement(z.a,{to:"/"}):r.a.createElement(z.b,{path:e.path,exact:e.exact,component:e.component}):r.a.createElement(_t,null)},Ct=a(173),wt=a.n(Ct),kt=function(){var e=W().state;if(!e.offline&&!e.error)return null;var t=e.error;return Array.isArray(t)&&(t=t.join(". ")),"string"!==typeof t&&(t=String(t)),e.error?r.a.createElement("div",{className:wt.a.offline},"Error: ",t):r.a.createElement("div",{className:wt.a.offline},"You seem to be offline! Please try again later")},Ot=(a(277),a(284)),Mt=a(278),jt=a.n(Mt),Nt=function(){var e=W().dispatch,t=Object(Ae.a)({username:"",password:"",verified:!1,hasPassword:!1,loading:!1}),a=Object(c.a)(t,2),s=a[0],o=a[1],l=Object(n.useRef)(null),i=function(t){if(t&&!s.loading){o((function(e){e.loading=!0}));var a={username:s.username,password:s.password,captchaToken:t};ye("/auth","POST",a).then((function(t){if(l.current.resetCaptcha&&l.current.resetCaptcha(),!t||!t.user.user_id)return console.warn("Invalid user object"),void e({type:"login",payload:null});e({type:"login",payload:t})})).catch((function(t){400!==t.status&&e({type:"error",payload:t.errors.join(", ")}),l.current.resetCaptcha&&l.current.resetCaptcha(),o((function(e){e.loading=!1,e.verified=t.data&&t.data.verified||!1,400===t.status&&(e.hasPassword=!0)}))}))}},u="light";return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(u="dark"),r.a.createElement(g.a,{className:j()(jt.a.login,"mt-4")},r.a.createElement(V,null),r.a.createElement(fe.a,{noValidate:!0,onSubmit:function(e){e.preventDefault(),s.verified?i("verified"):l.current.execute()}},r.a.createElement(fe.a.Group,{controlId:"loginForm.username"},r.a.createElement(fe.a.Control,{as:"input",type:"text",autoComplete:"username",placeholder:"What's your name?",disabled:s.loading,autoFocus:!0,minLength:1,maxLength:20,onChange:function(e){var t=e.currentTarget.value;o((function(e){e.username=t}))},value:s.username}),s.hasPassword&&r.a.createElement(fe.a.Control,{as:"input",className:"mt-2",type:"password",placeholder:"Password...",autoComplete:"current-password",disabled:s.loading,autoFocus:!0,onChange:function(e){var t=e.currentTarget.value;o((function(e){e.password=t}))},value:s.password}),r.a.createElement(Ot.a,{ref:l,size:"invisible",theme:u,sitekey:h,onChange:i}),!1,r.a.createElement("p",{className:"text-center mt-4"},r.a.createElement(pe.a,{type:"submit",size:"sm"},"Login")))))},xt=function e(t){ye("/auth","GET").then((function(e){if(!e||!e.user.user_id)return console.warn("Invalid user object"),void t({type:"login",payload:null});t({type:"login",payload:e})})).catch((function(a){"Network Error"===a.message?(t({type:"offline",payload:null}),setTimeout((function(){e(t)}),2e3)):(401!==a.status&&t({type:"error",payload:a.errors.join(", ")}),t({type:"login",payload:null}))}))},Tt=function(){var e=G(),t=e.state,a=e.dispatch;return Object(n.useEffect)((function(){t.auth.checked||xt(a)}),[t.auth.checked,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(kt,null),r.a.createElement(z.d,null,r.a.createElement(yt,{path:"/login",component:Nt}),r.a.createElement(bt,{path:"/admin",component:I}),r.a.createElement(bt,{path:"/",component:vt})))},Lt=a(279),St=a(282),At=a(283),Ft=a.n(At),It=function(){var e=G().state,t=Object(Ae.a)({lastSound:new Date,windowFocused:!0,titleNotification:!1}),a=Object(c.a)(t,2),s=a[0],o=a[1],l=Object(n.useContext)(k).socket,i=Object(St.a)(Ft.a,{interrupt:!0,volume:.5}),u=Object(c.a)(i,1)[0],m=Object(n.useCallback)((function(e){return function(t){t.attributes.draft||e===t.user.user_id||o((function(e){e.windowFocused||(e.titleNotification=!0,(!e.lastSound||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return t.getTime()-e.getTime()}(e.lastSound)>5e3)&&(e.lastSound=new Date,u({})))}))}}),[o,u]),d=Object(n.useCallback)((function(){o((function(e){e.titleNotification=!1,e.windowFocused=!0}))}),[o]),f=Object(n.useCallback)((function(){o((function(e){e.windowFocused=!1}))}),[o]),p=e.auth.user?e.auth.user.user_id:null;return Object(n.useEffect)((function(){l&&p&&l.on("message",m(p))}),[l,m,p]),Object(n.useEffect)((function(){return window.addEventListener("focus",d),window.addEventListener("blur",f),function(){window.removeEventListener("focus",d),window.removeEventListener("blur",f)}}),[d,f]),r.a.createElement(Lt.a,null,r.a.createElement("title",null,s.titleNotification?"\u2022\u2022 dotdot":"dotdot"))},Ut=a(82),Rt=a(8),Bt=a(11);Ut.b.add(Rt.I,Rt.J,Rt.j,Rt.c,Rt.h,Bt.c,Rt.d,Rt.e,Rt.f,Rt.b,Rt.K,Bt.B,Rt.a,Rt.g,Rt.k,Rt.l,Rt.m,Rt.n,Rt.o,Rt.p,Rt.q,Rt.r,Rt.s,Rt.t,Rt.u,Rt.v,Rt.w,Rt.x,Rt.y,Rt.z,Rt.A,Rt.B,Rt.C,Rt.D,Rt.E,Rt.F,Rt.G,Rt.H,Rt.L,Rt.M,Rt.Q,Rt.R,Rt.T,Rt.U,Rt.V,Rt.W,Rt.Y,Bt.a,Bt.b,Bt.d,Bt.e,Bt.f,Bt.g,Bt.h,Bt.i,Bt.j,Bt.k,Bt.l,Bt.m,Bt.n,Bt.o,Bt.p,Bt.q,Bt.r,Bt.s,Bt.t,Bt.u,Bt.v,Bt.w,Bt.x,Bt.y,Bt.z,Bt.A,Bt.C,Bt.D,Bt.E,Bt.F,Bt.G,Bt.H,Bt.I,Bt.J,Bt.K,Rt.S,Rt.O,Rt.N,Rt.X,Rt.P,Rt.i);a(639);var Pt=r.a.createElement(l.a,{basename:"/"},r.a.createElement(H,null,r.a.createElement(O,null,r.a.createElement(It,null),r.a.createElement(Tt,null))));o.a.render(Pt,document.getElementById("root"))},77:function(e,t,a){e.exports={badge:"UserBadge_badge__28gDi",lock:"UserBadge_lock__EV7LR",closed:"UserBadge_closed__3uZeG",pulse:"UserBadge_pulse__3c_w7",dot:"UserBadge_dot__1T6bu",name:"UserBadge_name__jOOgp"}},90:function(e,t,a){e.exports={dashboardWidget:"Widget_dashboardWidget__Z_mwK",title:"Widget_title__2QBZt",content:"Widget_content__1BMNx",icon:"Widget_icon__3cYOg",blue:"Widget_blue__1DB9R",green:"Widget_green__2mXfC",orange:"Widget_orange__X3jtY",history:"Widget_history__1eQoj",change:"Widget_change__36iJl","text-muted":"Widget_text-muted__1SkGI"}},91:function(e,t,a){e.exports={logo:"LogoAnimation_logo__cXB1h",svgFilter:"LogoAnimation_svgFilter__DGLai",blob:"LogoAnimation_blob__1-tkV","blob-first":"LogoAnimation_blob-first__kGvvT","blob-second":"LogoAnimation_blob-second__20T0q"}},92:function(e,t,a){e.exports={header:"Header_header__2XEwx",logo:"Header_logo__1GzGV",badge:"Header_badge__3OtLN",online:"Header_online__2vz5R"}},94:function(e,t,a){e.exports={messages:"Messages_messages__tCmp1",messageScroll:"Messages_messageScroll__CCnSp",unseen:"Messages_unseen__gVw6f",unseenContainer:"Messages_unseenContainer__3haBw"}},95:function(e,t,a){e.exports={textIcon:"TextIcon_textIcon__2H6ej",interactive:"TextIcon_interactive__j55M9"}}},[[312,1,2]]]);
//# sourceMappingURL=main.a67fc483.chunk.js.map