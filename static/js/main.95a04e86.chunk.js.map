{"version":3,"sources":["sections/Chat/Session/AdminBadge/index.module.scss","sections/Chat/Session/PasswordModal/index.module.scss","sections/Chat/OnlineUsers/index.module.scss","sections/Chat/Messages/Message/MessageContent/index.module.scss","components/OfflineCheck/index.module.scss","sections/Chat/Messages/Message/index.module.scss","sections/Chat/index.module.scss","assets/img/dotdot.svg","sections/Chat/Wrapper/index.module.scss","sections/Login/index.module.scss","assets/sounds/newMessage.mp3","sections/Chat/TextBox/index.module.scss","store/types.ts","constants.ts","sections/Admin/RealtimeChart/index.tsx","lib/secondsToHuman.ts","util/socketProvider.tsx","sections/Admin/Widget/index.tsx","sections/Admin/index.tsx","lib/color/makeColorReadable.ts","lib/color/hex2rgb.ts","lib/color/getRgbLuminance.ts","lib/color/psbc.ts","store/reducer.ts","store/state.tsx","components/Logo/index.tsx","components/Loader/index.tsx","sections/Chat/Wrapper/index.tsx","sections/Chat/Session/UserBadge/index.tsx","sections/Chat/Session/AdminBadge/index.tsx","util/fetch.ts","sections/Chat/Session/PasswordModal/index.tsx","sections/Chat/Session/index.tsx","sections/Chat/OnlineUsers/User/index.tsx","sections/Chat/OnlineUsers/index.tsx","sections/Chat/Header/index.tsx","sections/Chat/Messages/Message/HelpMessage/index.tsx","sections/Chat/Messages/Message/MessageContent/index.tsx","sections/Chat/Messages/Message/index.tsx","sections/Chat/Messages/ScrollBox/index.tsx","sections/Chat/Messages/index.tsx","sections/Chat/TextBox/index.tsx","sections/Chat/index.tsx","sections/loading/index.tsx","util/AuthenticatedRoute.tsx","util/UnauthenticatedRoute.tsx","components/OfflineCheck/index.tsx","sections/Login/index.tsx","util/checkAuth.ts","router.tsx","components/Title/index.tsx","lib/dateDiff.ts","lib/icons.ts","index.tsx","sections/Chat/Session/UserBadge/index.module.scss","sections/Admin/Widget/index.module.scss","components/Logo/index.module.scss","sections/Chat/Header/index.module.scss","sections/Chat/Messages/index.module.scss"],"names":["module","exports","EVENTS","CONNECT","DISCONNECT","MESSAGE","COMMAND","HISTORY","ONLINE_USERS","STATS","TIMER","CONTROL","CHANGE_ROOM","API_URL","process","VALID_USERNAME","CAPTCHA_KEY","props","data","map","num","index","date","value","i","length","MAX_STATS_BARS","push","style","width","height","barSize","barCategoryGap","barGap","margin","top","bottom","left","right","allowDecimals","dataKey","tick","label","position","offset","fill","stroke","isAnimationActive","type","cursor","forHumans","seconds","levels","Math","floor","returntext","max","trim","SocketContext","createContext","socket","useGlobalState","state","dispatch","useState","setSocket","hasPassword","auth","user","useEffect","loggedIn","payload","newSocket","socketio","reconnection","timeout","setInterval","connected","emit","setTimeout","Object","values","forEach","event","on","error","provider","Provider","children","content","className","styles","title","icon","classNames","iconBg","history","dashboardWidget","tooltip","Tooltip","id","OverlayTrigger","delay","show","hide","overlay","useContext","totalTime","stats","timeActive","timeInactive","statsData","header","round","sessions","detail","onlineUsers","totalUsers","totalMessages","cpuUsage","freeMemory","uptime","roomData","rooms","Container","fluid","Row","Col","RealtimeChart","messages","users","onClick","room","activePayload","domain","stackId","row","key","Widget","makeColorReadable","color","colorRgb","hex","result","exec","r","parseInt","g","b","hex2Rgb","lightMode","window","matchMedia","matches","lum","a","v","pow","getRgbLuminance","p","c0","P","f","t","h","c1","l","m","pSBCr","d","n","x","split","slice","parseFloat","toString","undefined","pSBC","produce","draft","action","offline","checked","systemMessage","systemUser","timestamp","Date","attributes","private","contrastColor","incomingMessage","draftIsPastMessage","draftIndex","eachMessage","user_id","isEmpty","splice","replyToTimestamp","messageReply","find","getTime","replyTo","lastMessage","message","shift","keys","name","isActive","initialState","draftTimer","Array","StateContext","React","console","warn","StateProvider","useReducer","reducer","infinite","animationIterationCount","animationDirection","logo","blob","svgFilter","xmlns","version","in","stdDeviation","mode","in2","Logo","wrapper","small","isLocked","badge","dot","lock","closed","to","marginLeft","csrfToken","axios","defaults","withCredentials","fetchResource","path","method","body","Error","url","options","xsrfHeaderName","headers","response","status","parseAxiosError","errors","parseErrorList","join","defaultError","isArray","parseErrors","useFetch","onHide","validated","setValidated","password","setPassword","repeatPassword","setRepeatPassword","Modal","Form","noValidate","onSubmit","preventDefault","stopPropagation","currentTarget","checkValidity","then","catch","reason","Header","closeButton","Title","Body","Group","controlId","Control","as","autoComplete","placeholder","autoFocus","required","minLength","onChange","Feedback","pattern","Footer","footer","href","Button","variant","isOpen","setModalOpen","tooltipText","isAdmin","AdminBadge","placement","UserBadge","PasswordModal","isCurrentUser","iconName","inactive","userColor","count","User","scrollingWhileFocused","pageYOffset","Wrapper","src","alt","online","OnlineUsers","Table","size","rel","target","USER_REGEX","RegExp","URL_REGEX","isSystem","messageContent","HelpMessage","reactStringReplace","username","userIndex","findIndex","mention","MessageComponent","reply","userData","userContrastColor","isUserOnline","messageBody","isReplyAllowed","MessageContent","system","replyButton","background","spin","toLocaleTimeString","hour","minute","replyBox","borderLeftColor","boxRef","onScrollChanged","threshold","scrollTop","setScrollTop","setHeight","scrollDebounce","useRef","onScrollDebounced","useCallback","isAtBottom","clearTimeout","current","scrollToBottom","scrollHeight","offsetHeight","updateScrollState","shouldScroll","customThreshold","abs","addEventListener","removeEventListener","newHeight","useImmer","scrollAtBottom","unseenMessages","localState","setLocalState","chatAreaRef","unseen","unseenContainer","messageScroll","ref","ScrollBox","Message","onMessageClick","onFocus","onBlur","onCancelReply","isCommand","focused","setState","inputRef","askForHelp","onInputFocus","onInputBlur","sendMessage","area","actions","e","focus","textBox","command","InputGroup","inputGroup","isPM","words","test","substr","Append","button","textIcon","smoothscroll","polyfill","isTextBoxFocused","messageTimestamp","log","cancelReply","setHeaderPosition","Loader","scrollingChat","Messages","TextBox","exact","component","String","verified","loading","captchaRef","oncaptchaChange","token","captchaToken","resetCaptcha","theme","login","execute","disabled","maxLength","sitekey","CAPTCHA_PROVIDER","checkAuth","OfflineCheck","UnauthenticatedRoute","Login","AuthenticatedRoute","Admin","Chat","lastSound","windowFocused","titleNotification","useSound","newMessageSound","interrupt","volume","play","onMessage","msg","t1","t2","dateDiff","library","add","faLock","faLockOpen","faCircle","faDotCircle","farDotCircle","faCircleNotch","faCode","faCog","faArrowAltCircleDown","faMeh","farMeh","faAngry","faDizzy","faFlushed","faFrown","faFrownOpen","faGrimace","faGrin","faGrinAlt","faGrinBeam","faGrinBeamSweat","faGrinHearts","faGrinSquint","faGrinSquintTears","faGrinStars","faGrinTears","faGrinTongue","faGrinTongueSquint","faGrinTongueWink","faGrinWink","faKiss","faKissBeam","faKissWinkHeart","faLaugh","faLaughBeam","faLaughSquint","faLaughWink","faMehBlank","faMehRollingEyes","faSadCry","faSadTear","faSmile","faSmileBeam","faSmileWink","faSurprise","faTired","farAngry","farDizzy","farFlushed","farFrown","farFrownOpen","farGrimace","farGrin","farGrinAlt","farGrinBeam","farGrinBeamSweat","farGrinHearts","farGrinSquint","farGrinSquintTears","farGrinStars","farGrinTears","farGrinTongue","farGrinTongueSquint","farGrinTongueWink","farGrinWink","farKiss","farKissBeam","farKissWinkHeart","farLaugh","farLaughBeam","farLaughSquint","farLaughWink","farMehBlank","farMehRollingEyes","farSadCry","farSadTear","farSmile","farSmileBeam","farSmileWink","farSurprise","farTired","faShieldAlt","faQuestionCircle","faPaperPlane","faTimes","faReply","app","basename","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.95a04e86.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"badge\":\"AdminBadge_badge__1HTPx\",\"icon\":\"AdminBadge_icon__H_GPA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"PasswordModal_footer__32ASO\",\"left\":\"PasswordModal_left__1uFYg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"onlineUsers\":\"OnlineUsers_onlineUsers__2Umxk\",\"count\":\"OnlineUsers_count__1iz1Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageContent\":\"MessageContent_messageContent__2lJQW\",\"mention\":\"MessageContent_mention__1rALG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"offline\":\"OfflineCheck_offline__2vKbm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__2v30T\",\"replyButton\":\"Message_replyButton__15_Mb\",\"mention\":\"Message_mention__82QFp\",\"system\":\"Message_system__2g6ZE\",\"user\":\"Message_user__3HofW\",\"timestamp\":\"Message_timestamp__2armv\",\"offline\":\"Message_offline__32gHu\",\"icon\":\"Message_icon__ATXFm\",\"inactive\":\"Message_inactive__2OBrK\",\"body\":\"Message_body__32TEj\",\"draft\":\"Message_draft__1zB7h\",\"header\":\"Message_header__3wUCX\",\"private\":\"Message_private__ORZ48\",\"replyBox\":\"Message_replyBox__1NP5z\",\"reply\":\"Message_reply__jMrB5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrollingChat\":\"Chat_scrollingChat__165RB\"};","module.exports = __webpack_public_path__ + \"static/media/dotdot.c9ed5a8a.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Wrapper_wrapper__STXDh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__38Hzs\"};","module.exports = __webpack_public_path__ + \"static/media/newMessage.482e2f99.mp3\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"area\":\"TextBox_area__udJ9V\",\"focused\":\"TextBox_focused__3mYkC\",\"textBox\":\"TextBox_textBox__McZeC\",\"inputGroup\":\"TextBox_inputGroup__1PdvA\",\"reply\":\"TextBox_reply__2tzzr\",\"actions\":\"TextBox_actions__1geZu\",\"textIcon\":\"TextBox_textIcon__mlsnG\",\"button\":\"TextBox_button__FdM7P\",\"private\":\"TextBox_private__1kesE\",\"command\":\"TextBox_command__1uXWO\"};","import { IconName } from \"@fortawesome/fontawesome-svg-core\"\n\nexport type User = {\n  user_id: string\n  name: string\n  color: string\n  contrastColor?: string\n  icon: IconName | null\n  isActive: boolean\n  isAdmin?: boolean\n  hasPassword: boolean\n}\n\nexport type MessageAttributes = {\n  draft: boolean\n  private: boolean\n  to?: string | null\n  replyToTimestamp?: number | null\n  replyTo?: Message | null\n};\n\nexport type Message = {\n  user: User\n  timestamp: Date\n  content: string[]\n  attributes: MessageAttributes\n}\n\nexport type IncomingMessage = {\n  user: User\n  timestamp: Date\n  content: string\n  attributes: MessageAttributes\n}\n\nexport type OutgoingMessage = {\n  content: string\n  attributes: MessageAttributes\n}\n\nexport type RoomStats = {\n  id: string,\n  active: number,\n  inactive: number,\n}\n\nexport type AppState = {\n  auth: {\n    checked: boolean\n    loggedIn: boolean\n    user: User | null\n  }\n  socket: {\n    connected: boolean\n  }\n  draftTimer: number,\n  onlineUsers: User[]\n  messages: Message[]\n  stats: {\n    messages: number[],\n    users: number[],\n    rooms: RoomStats[],\n    onlineUsers: number,\n    totalMessages: number,\n    totalUsers: number,\n    cpuUsage: number,\n    freeMemory: number,\n    uptime: number,\n    timeActive: number,\n    timeInactive: number,\n    sessions: number,\n  }\n  offline: boolean\n  error: string | null\n\n  [key: string]: any\n}\n\nexport type Action = {\n  type: string\n  payload?: any\n}\n\nexport type AppContext = {\n  state: AppState\n  dispatch: React.Dispatch<Action>\n}\n\nexport type AuthData = {\n  user: User\n  token: string\n}\n\nexport const EVENTS = {\n  CONNECT: 'connect',\n  DISCONNECT: 'disconnect',\n  MESSAGE: 'message',\n  COMMAND: 'command',\n  HISTORY: 'history',\n  ONLINE_USERS: 'users',\n  STATS: 'stats',\n  TIMER: 'timer',\n  CONTROL: 'control',\n  CHANGE_ROOM: 'change_room',\n};","export const API_URL = process.env.REACT_APP_API_URL || 'https://api.dotdot.im'\nexport const VALID_USERNAME = /^[A-Za-z0-9]+(?:[ _][A-Za-z0-9]+)*_?$/i\nexport const CAPTCHA_PROVIDER = process.env.REACT_APP_CAPTCHA_PROVIDER || 'recaptcha'\nexport const CAPTCHA_KEY = process.env.REACT_APP_CAPTCHA_KEY || ''\nexport const MAX_MESSAGE_HISTORY = 100\n","import React from 'react'\nimport { AreaChart, XAxis, YAxis, Area, Tooltip, ResponsiveContainer, Label } from 'recharts'\nimport { MAX_STATS_BARS } from '..';\n\ntype Props = {\n  data: number[],\n  height?: number,\n  label: string,\n};\n\nexport default (props: Props) => {\n  const data = props.data.map((num, index) => ({\n    date: index,\n    value: num,\n  }))\n\n  for (let i = data.length; i < MAX_STATS_BARS; i++) {\n    data.push({\n      date: i,\n      value: 0,\n    })\n  }\n\n  return (\n    <div style={ { width: '100%', height: `${ props.height || 250 }px` } }>\n      <ResponsiveContainer>\n        <AreaChart data={data} barSize={ 5 } barCategoryGap={ 2 } barGap={ 2 } margin={{ top: 50, bottom: 20, left: 0, right: 0}}>\n          <YAxis allowDecimals={ false } />\n          <XAxis dataKey=\"date\" tick={false}>\n            <Label value={ props.label } position=\"bottom\" offset={ -15 } fill='#ccc' />\n          </XAxis>\n          <Area dataKey=\"value\" fill=\"#f75f00\" stroke=\"#f75f00\" isAnimationActive={ false } type='linear' />\n          <Tooltip cursor={ { fill: 'rgba(255, 255, 255, 0.1)' } }/>\n        </AreaChart>\n      </ResponsiveContainer>\n    </div>\n  )\n}","export function forHumans ( seconds: number ) {\n  const levels: [number, string][] = [\n      [Math.floor(seconds / 31536000), 'y'],\n      [Math.floor((seconds % 31536000) / 86400), 'd'],\n      [Math.floor(((seconds % 31536000) % 86400) / 3600), 'h'],\n      [Math.floor((((seconds % 31536000) % 86400) % 3600) / 60), 'm'],\n      [(((seconds % 31536000) % 86400) % 3600) % 60, 's'],\n  ];\n  let returntext = '';\n\n  for (let i = 0, max = levels.length; i < max; i++) {\n      if ( levels[i][0] === 0 ) continue;\n      returntext += ' ' + levels[i][0] + levels[i][1];\n  };\n  return returntext.trim();\n}","import React, { createContext, useEffect, useState } from 'react'\nimport socketio from 'socket.io-client'\n\nimport { useGlobalState } from 'store/state'\nimport { API_URL } from '../constants'\nimport { Message, EVENTS } from 'store/types'\n\nconst USAGE_TIMER_INTERAL = 30 * 1000\n\ntype SocketContextType = {\n  socket: SocketIOClient.Socket | null\n}\n\nexport const SocketContext = createContext<SocketContextType>({\n  socket: null,\n})\n\ntype Props = {\n  children: any\n}\n\nexport default (props: Props) => {\n  const { state, dispatch } = useGlobalState()\n  const [socket, setSocket] = useState<SocketIOClient.Socket | null>(null)\n\n  const hasPassword = state.auth.user?.hasPassword;\n\n  useEffect(() => {\n    if (!state.auth.loggedIn) {\n      return\n    }\n\n    // socket already set up\n    if (socket) {\n      return;\n    }\n\n    // clear any errors\n    dispatch({\n      type: 'error',\n      payload: null,\n    })\n\n    // initialize the socket\n    const newSocket = socketio(API_URL, {\n      reconnection: true,\n      timeout: 2000,\n    })\n\n    setInterval(() => {\n      if (newSocket.connected) {\n        newSocket.emit('timer')\n      }\n    }, USAGE_TIMER_INTERAL)\n\n    // remind to set a password\n    if (!hasPassword) {\n      setTimeout(() => {\n        dispatch({\n          type: 'system_message',\n          payload: 'Remember: If you want to keep this username, you must set a password! You can set it by clicking on the lock icon on the top left of the screen.'\n        })\n      }, 60 * 1000);\n    }\n\n    Object.values(EVENTS).forEach(event => {\n      newSocket.on(event, (payload: any) => {\n        dispatch({\n          type: `socket_${event}`,\n          payload: payload,\n        })\n      })\n    })\n\n    newSocket.on('stats', (payload: Message[]) => {\n      dispatch({\n        type: 'stats',\n        payload,\n      })\n    })\n\n    newSocket.on('connect_error', () => {\n      dispatch({\n        type: 'offline',\n        payload: null,\n      })\n    })\n\n    newSocket.on('connect_timeout', () => {\n      dispatch({\n        type: 'offline',\n        payload: null,\n      })\n    })\n\n    newSocket.on('error', (error: string) => {\n      dispatch({\n        type: `socket_${EVENTS.DISCONNECT}`,\n      })\n\n      if (error) {\n        dispatch({\n          type: 'error',\n          payload: error,\n        })\n        dispatch({\n          type: 'login',\n          payload: null,\n        })\n      } else {\n        dispatch({\n          type: 'offline',\n          payload: null,\n        })\n      }\n    })\n\n    setSocket(newSocket)\n  }, [dispatch, socket, state.auth.loggedIn, hasPassword])\n\n  let provider = {\n    socket,\n  }\n\n  return (\n    <SocketContext.Provider value={provider}>\n      {props.children}\n    </SocketContext.Provider>\n  )\n}\n","import React from 'react'\nimport { IconProp } from '@fortawesome/fontawesome-svg-core';\nimport classNames from 'classnames';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Tooltip, OverlayTrigger } from 'react-bootstrap';\n\nimport styles from './index.module.scss'\n\ntype Props = {\n  title: string;\n  content: string | number | null;\n  icon?: IconProp;\n  iconBg?: \"blue\" | \"orange\" | \"green\";\n  history?: string | number | null;\n  tooltip?: string;\n};\n\nexport default (props: Props) => {\n  let content = (\n    <>\n      <div className={ styles.title }>{props.title}</div>\n      <span className={ styles.content }>{props.content}</span>\n      {props.icon && (\n        <span className={classNames(\"icon\", props.iconBg)}>\n          <FontAwesomeIcon icon={props.icon} />\n        </span>\n      )}\n      <div className={ styles.history }>\n        <span className={ 'text-muted' }>{props.history}</span>\n      </div>\n    </>\n  );\n\n  content = (\n    <div className={ styles.dashboardWidget }>\n      { content }\n    </div>\n  );\n\n  if (!props.tooltip) {\n    return content;\n  }\n\n  const tooltip = (\n    <Tooltip id='counterTooltip'>\n      { props.tooltip }\n    </Tooltip>\n  );\n\n  return (\n    <OverlayTrigger\n      delay={{ show: 50, hide: 0 }}\n      overlay={ tooltip }\n    >\n      { content }\n    </OverlayTrigger>\n  );\n};\n","import React, { useContext } from 'react'\nimport { Container, Row, Col } from 'react-bootstrap'\nimport { BarChart, XAxis, YAxis, Bar, Tooltip, ResponsiveContainer, Label } from 'recharts'\n\nimport useGlobalState from 'store/state';\nimport RealtimeChart from './RealtimeChart';\nimport { forHumans } from 'lib/secondsToHuman';\nimport { SocketContext } from 'util/socketProvider';\nimport { EVENTS } from 'store/types';\nimport Widget from './Widget';\n\nexport const MAX_STATS_BARS = 100;\n\ntype Stat = {\n  header: string,\n  data: string | number,\n  detail?: string,\n  tooltip?: string,\n}\n\nexport default () => {\n  const { state } = useGlobalState()\n\n  const { socket } = useContext(SocketContext)\n\n  const totalTime = state.stats.timeActive + state.stats.timeInactive\n\n  const statsData: Stat[][] = [\n    [\n      {\n        header: 'Time Active / Session',\n        data: forHumans(Math.round(state.stats.timeActive / state.stats.sessions)),\n        detail: 'Total: ' + forHumans(state.stats.timeActive) + ' (' + Math.round(state.stats.timeActive * 100 / totalTime) + '%)'\n      },\n      {\n        header: 'Time Inactive / Session',\n        data: forHumans(Math.round(state.stats.timeInactive / state.stats.sessions)),\n        detail: 'Total: ' + forHumans(state.stats.timeInactive) + ' (' + Math.round(state.stats.timeInactive * 100 / totalTime) + '%)'\n      },\n    ],\n    [\n      {\n        header: 'Users Online',\n        data: Math.round(state.stats.onlineUsers * 100 / state.stats.totalUsers) + '%',\n        detail: `${state.stats.onlineUsers} out of ${state.stats.totalUsers}`,\n        tooltip: '',\n      },\n      {\n        header: 'Total Messages',\n        data: state.stats.totalMessages,\n        detail: Math.round(state.stats.totalMessages / state.stats.totalUsers) + ' messages / user'\n      },\n      {\n        header: 'Server',\n        data: 'CPU: ' + state.stats.cpuUsage + '% - RAM: ' + state.stats.freeMemory + '%',\n        detail: 'Up for ' + forHumans(state.stats.uptime),\n        tooltip: 'Shows CPU usage over the last few seconds, and free RAM',\n      },\n      {\n        header: 'Avg Sessions / user',\n        data: Math.round(state.stats.sessions / state.stats.totalUsers),\n        detail: 'Total sessions: ' + state.stats.sessions\n      },\n    ],\n  ]\n\n  const roomData = state.stats.rooms\n\n  const onRoomClick = (event: any) => {\n    if (!event) {\n      return\n    }\n    const room = event.activePayload[0].payload.id\n    if (socket) {\n      socket.emit(EVENTS.CHANGE_ROOM, {\n        room,\n      })\n    }\n  }\n\n  return (\n    <Container fluid>\n      <Row>\n        <Col>\n          <RealtimeChart\n            data={ state.stats.messages }\n            label='Realtime Messages'\n          />\n        </Col>\n        <Col>\n          <RealtimeChart\n            data={ state.stats.users }\n            label='Realtime Users'\n          />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <div style={ { width: '100%', height: '400px' } }>\n            <ResponsiveContainer>\n              <BarChart onClick={ onRoomClick } data={roomData} barSize={ 10 } margin={{ top: 50, bottom: 0, left: 0, right: 0}}>\n                <YAxis allowDecimals={ false } domain={ [ 0, 10 ] } />\n                <XAxis tick={false}>\n                  <Label value='Rooms' position=\"bottom\" offset={ -15 } fill='#ccc' />\n                </XAxis>\n                <Bar dataKey=\"active\" stackId='a' fill=\"#f75f00\" />\n                <Bar dataKey=\"inactive\" stackId='a' fill=\"#555\" />\n                <Tooltip cursor={ { fill: 'rgba(255, 255, 255, 0.1)' } }/>\n              </BarChart>\n            </ResponsiveContainer>\n          </div>\n        </Col>\n      </Row>\n      <Container className='mt-4'>\n        { statsData.map((row, index) => (\n          <Row key={ index }>\n            { row.map(stats => (\n              <Col key={ stats.header }>\n                <Widget\n                  title={ stats.header }\n                  content={ stats.data }\n                  history={ stats.detail }\n                  tooltip={ stats.tooltip }\n                />\n              </Col>\n            )) }\n          </Row>\n        )) }\n      </Container>\n    </Container>\n  )\n}","import { getRgbLuminance } from './getRgbLuminance'\nimport { hex2Rgb } from './hex2rgb'\nimport { pSBC } from './psbc'\n\n/**\n * Takes a HEX string (with or without pound) and returns a colour visible in the theme background\n */\nexport const makeColorReadable = (color: string) => {\n  const colorRgb = hex2Rgb(color)\n  const lightMode =\n    window.matchMedia &&\n    window.matchMedia('(prefers-color-scheme: light)').matches\n\n  if (!colorRgb) return '#0000FF' // fail\n\n  const lum = getRgbLuminance(colorRgb.r, colorRgb.g, colorRgb.b)\n  let offset = 0\n  // Only change color if luminance difference in the 50% range to theme\n  if (lightMode && lum >= 0.5) offset = -lum\n  else if (!lightMode && lum < 0.5) offset = lum + 0.2\n\n  /*\n  // !Demo\n  // Make sure to replicate the formula changes you do above, here\n  const forLight = lum >= 0.5 ? pSBC(-lum, color, '#000000') : color\n  const forDark = lum < 0.5 ? pSBC(lum + 0.2, color, '#ffffff') : color\n  // Current on dark\n  console.log(\n    `%c (${forDark !== color ? '<' : '='}) @jaicab ☃ ★ ♖`,\n    `background:#293134; color: ${color}; display: block; padding: 1em; font-size: 1.5em`\n  )\n  // New on dark\n  if (forDark !== color)\n    console.log(\n      `%c (>) @jaicab ☃ ★ ♖`,\n      `background:#293134; color: ${forDark}; display: block; padding: 1em; font-size: 1.5em`\n    )\n  // Current on light\n  console.log(\n    `%c (${forLight !== color ? '<' : '='}) @jaicab ☃ ★ ♖`,\n    `background:#fcfcfc; color: ${color}; display: block; padding: 1em; font-size: 1.5em`\n  )\n  // New on light\n  if (forLight !== color)\n    console.log(\n      '%c (>) @jaicab ☃ ★ ♖',\n      `background:#fcfcfc; color: ${forLight}; display: block; padding: 1em; font-size: 1.5em`\n    )\n  */\n\n  return offset ? pSBC(offset, color) || color : color\n}\n","/**\n * hex2Rgb\n * Takes string, returns { r, g, b }\n */\nexport const hex2Rgb = (hex: string) => {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null\n}\n","/**\n * Calculates luminance for { r, g, b } passed\n * Returns value 0-1\n */\nexport const getRgbLuminance = (r: number, g: number, b: number) => {\n  const a = [r, g, b].map(function (v) {\n    v /= 255\n    return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4)\n  })\n  return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722\n}\n","// @ts-nocheck\n/* eslint-disable */\n\n/**\n * pSBC v4.0\n * ===============\n * How to use and source:\n * https://github.com/PimpTrizkit/PJs/wiki/12.-Shade,-Blend-and-Convert-a-Web-Color-(pSBC.js)#usages\n */\nexport const pSBC = (\n  p: number,\n  c0: string,\n  c1: string = null,\n  l: boolean = false\n) => {\n  let r,\n    g,\n    b,\n    P,\n    f,\n    t,\n    h,\n    i = parseInt,\n    m = Math.round,\n    a = typeof c1 == 'string'\n  if (\n    typeof p != 'number' ||\n    p < -1 ||\n    p > 1 ||\n    typeof c0 != 'string' ||\n    (c0[0] != 'r' && c0[0] != '#') ||\n    (c1 && !a)\n  )\n    return null\n  if (!window.pSBCr)\n    window.pSBCr = (d) => {\n      let n = d.length,\n        x = {}\n      if (n > 9) {\n        ;([r, g, b, a] = d = d.split(',')), (n = d.length)\n        if (n < 3 || n > 4) return null\n        ;(x.r = i(r[3] == 'a' ? r.slice(5) : r.slice(4))),\n          (x.g = i(g)),\n          (x.b = i(b)),\n          (x.a = a ? parseFloat(a) : -1)\n      } else {\n        if (n == 8 || n == 6 || n < 4) return null\n        if (n < 6)\n          d =\n            '#' +\n            d[1] +\n            d[1] +\n            d[2] +\n            d[2] +\n            d[3] +\n            d[3] +\n            (n > 4 ? d[4] + d[4] : '')\n        d = i(d.slice(1), 16)\n        if (n == 9 || n == 5)\n          (x.r = (d >> 24) & 255),\n            (x.g = (d >> 16) & 255),\n            (x.b = (d >> 8) & 255),\n            (x.a = m((d & 255) / 0.255) / 1000)\n        else\n          (x.r = d >> 16), (x.g = (d >> 8) & 255), (x.b = d & 255), (x.a = -1)\n      }\n      return x\n    }\n  ;(h = c0.length > 9),\n    (h = a ? (c1.length > 9 ? true : c1 == 'c' ? !h : false) : h),\n    (f = window.pSBCr(c0)),\n    (P = p < 0),\n    (t =\n      c1 && c1 != 'c'\n        ? window.pSBCr(c1)\n        : P\n        ? { r: 0, g: 0, b: 0, a: -1 }\n        : { r: 255, g: 255, b: 255, a: -1 }),\n    (p = P ? p * -1 : p),\n    (P = 1 - p)\n  if (!f || !t) return null\n  if (l)\n    (r = m(P * f.r + p * t.r)),\n      (g = m(P * f.g + p * t.g)),\n      (b = m(P * f.b + p * t.b))\n  else\n    (r = m((P * f.r ** 2 + p * t.r ** 2) ** 0.5)),\n      (g = m((P * f.g ** 2 + p * t.g ** 2) ** 0.5)),\n      (b = m((P * f.b ** 2 + p * t.b ** 2) ** 0.5))\n  ;(a = f.a),\n    (t = t.a),\n    (f = a >= 0 || t >= 0),\n    (a = f ? (a < 0 ? t : t < 0 ? a : a * P + t * p) : 0)\n  if (h)\n    return (\n      'rgb' +\n      (f ? 'a(' : '(') +\n      r +\n      ',' +\n      g +\n      ',' +\n      b +\n      (f ? ',' + m(a * 1000) / 1000 : '') +\n      ')'\n    )\n  else\n    return (\n      '#' +\n      (4294967296 + r * 16777216 + g * 65536 + b * 256 + (f ? m(a * 255) : 0))\n        .toString(16)\n        .slice(1, f ? undefined : -2)\n    )\n}\n","import produce from 'immer'\n\nimport { AppState, Action, Message, EVENTS, User, IncomingMessage } from './types'\nimport { MAX_MESSAGE_HISTORY } from '../constants'\nimport { MAX_STATS_BARS } from 'sections/Admin'\nimport { makeColorReadable } from 'lib/color/makeColorReadable'\n\n// TODO NEW BLOG POST\n// const REDUCER = {\n//   [REDUX_CONSTANTS.LOGIN]: (draft, payload) => {},\n// };\n\nexport default produce((draft: AppState, action: Action) => {\n  // REDUCER[action.type](draft, action.payload);\n  // console.log('REDUCER', action)\n\n  switch (action.type) {\n    case 'login':\n      if (!draft.offline) {\n        draft.auth.checked = true\n      }\n\n      if (!action.payload) {\n        draft.auth.loggedIn = false\n        draft.auth.user = null\n        break\n      }\n\n      draft.offline = false\n\n      draft.auth.loggedIn = true\n      draft.auth.user = action.payload.user\n      break\n    case 'offline':\n      draft.offline = true\n      draft.error = null\n      draft.socket.connected = false\n      break\n    case 'error':\n      draft.error = action.payload\n      break\n    case 'user_password':\n      if (draft.auth.user) {\n        draft.auth.user.hasPassword = true\n      }\n      break\n    case 'system_message':\n      const systemMessage = {\n        user: systemUser,\n        content: [action.payload],\n        timestamp: new Date(),\n        attributes: {\n          private: false,\n          draft: false,\n        }\n      };\n      draft.messages.push(systemMessage)\n      break;\n    case `socket_${EVENTS.CONNECT}`:\n      draft.socket.connected = true\n      draft.offline = false\n      draft.error = null\n      break\n    case `socket_${EVENTS.DISCONNECT}`:\n      draft.socket.connected = false\n      draft.offline = true\n      draft.error = null\n      break\n    case `socket_${EVENTS.ONLINE_USERS}`:\n      draft.onlineUsers = action.payload.users.map((user: User) => {\n        user.contrastColor = makeColorReadable('#' + user.color)\n        return user\n      })\n      break\n    case `socket_${EVENTS.MESSAGE}`:\n      const incomingMessage: IncomingMessage = action.payload;\n      incomingMessage.timestamp = new Date(incomingMessage.timestamp)\n\n      // delete draft from this user, and if the draft is past messages, stay there\n      let draftIsPastMessage = false;\n      let draftIndex = -1;\n      for (let i = draft.messages.length - 1; i >= 0; i--) {\n        const eachMessage = draft.messages[i]\n        if (!eachMessage.attributes.draft) {\n          draftIsPastMessage = true\n        }\n        if (eachMessage.attributes.draft && eachMessage.user.user_id === incomingMessage.user.user_id) {\n          draftIndex = i;\n          break;\n        }\n      }\n\n      const isEmpty = incomingMessage.content.trim().length < 1\n\n      if (draftIndex > -1) {\n        if (draftIsPastMessage || !incomingMessage.attributes.draft) {\n          draft.messages.splice(draftIndex, 1)\n        } else if (!isEmpty && incomingMessage.attributes.draft) {\n          draft.messages[draftIndex].content[0] = incomingMessage.content\n          draft.messages[draftIndex].timestamp = new Date(incomingMessage.timestamp)\n          return;\n        }\n      }\n\n      if (isEmpty) {\n        return;\n      }\n\n      if (incomingMessage.attributes.replyToTimestamp) {\n        const messageReply = draft.messages.find(eachMessage => eachMessage.timestamp.getTime() === incomingMessage.attributes.replyToTimestamp) || null\n        if (messageReply && messageReply.user) {\n          incomingMessage.attributes.replyTo = messageReply\n        }\n      }\n\n      if (!incomingMessage.attributes.draft) {\n        const lastMessage = draft.messages[draft.messages.length - 1]\n\n        if (\n            lastMessage &&\n            lastMessage.user.user_id === incomingMessage.user.user_id &&\n            lastMessage.attributes.private === incomingMessage.attributes.private &&\n            lastMessage.attributes.replyToTimestamp === incomingMessage.attributes.replyToTimestamp\n          ) {\n          // last message was by this same user (and it's the same kind of message)\n          lastMessage.content.push(incomingMessage.content)\n          lastMessage.timestamp = new Date(incomingMessage.timestamp)\n          return\n        }\n      }\n\n      const message: Message = {\n        user: incomingMessage.user,\n        timestamp: incomingMessage.timestamp,\n        attributes: incomingMessage.attributes,\n        content: [incomingMessage.content],\n      }\n\n      draft.messages.push(message)\n\n      if (draft.messages.length > MAX_MESSAGE_HISTORY) {\n        draft.messages.shift()\n      }\n      break;\n    case `socket_${EVENTS.HISTORY}`:\n      draft.messages = action.payload.map((eachMessage: Message) => {\n        eachMessage.timestamp = new Date(eachMessage.timestamp)\n        return eachMessage\n      });\n      break;\n    case `socket_${EVENTS.STATS}`:\n      draft.stats.messages.push(action.payload.messages)\n      if (draft.stats.messages.length > MAX_STATS_BARS) {\n        draft.stats.messages.shift()\n      }\n\n      draft.stats.users.push(action.payload.users)\n      if (draft.stats.users.length > MAX_STATS_BARS) {\n        draft.stats.users.shift()\n      }\n\n      draft.stats.rooms = action.payload.rooms\n      draft.stats.onlineUsers = action.payload.users\n      draft.stats.totalUsers = action.payload.totalUsers\n      draft.stats.totalMessages = action.payload.totalMessages\n      draft.stats.cpuUsage = Math.round(action.payload.cpuUsage * 100)\n      draft.stats.freeMemory = Math.round(action.payload.freeMemory * 100)\n      draft.stats.uptime = Math.round(action.payload.uptime)\n      draft.stats.timeActive = action.payload.timeActive * 30\n      draft.stats.timeInactive = action.payload.timeInactive * 30\n      draft.stats.sessions = action.payload.sessions\n      break;\n    case `socket_${EVENTS.CONTROL}`:\n      Object.keys(action.payload).forEach(key => {\n        if (typeof draft[key] !== 'undefined') {\n          draft[key] = action.payload[key]\n        }\n      })\n  }\n})\n\nconst systemUser: User = {\n  user_id: 'dotdot',\n  name: 'dotdot',\n  icon: 'cog',\n  color: 'f75f00',\n  isActive: true,\n  hasPassword: true,\n};","import React from 'react'\n\nimport reducer from './reducer'\nimport { AppState, AppContext, Action } from './types'\nimport { MAX_STATS_BARS } from 'sections/Admin'\n\nexport const initialState: AppState = {\n  auth: {\n    checked: false,\n    loggedIn: false,\n    user: null,\n  },\n  socket: {\n    connected: false,\n  },\n  draftTimer: 100,\n  onlineUsers: [],\n  messages: [],\n  stats: {\n    messages: new Array(MAX_STATS_BARS).fill(0),\n    users: new Array(MAX_STATS_BARS).fill(0),\n    rooms: [],\n    onlineUsers: 0,\n    totalUsers: 0,\n    totalMessages: 0,\n    cpuUsage: 0,\n    freeMemory: 0,\n    uptime: 0,\n    timeActive: 0,\n    timeInactive: 0,\n    sessions: 1,\n  },\n  offline: false,\n  error: null,\n}\nconst defaultDispatch: React.Dispatch<Action> = () => {\n  console.warn('Using default reducer, check StateProvider')\n  return initialState\n}\nexport const StateContext = React.createContext<AppContext>({\n  state: initialState,\n  dispatch: defaultDispatch,\n})\n\ntype Props = {\n  state?: AppState,\n  children: any\n}\n\nexport const StateProvider = (props: Props) => {\n  const [state, dispatch] = React.useReducer(reducer, props.state || initialState)\n  // TODO: if value is not \"any\" then typescript has an issue with readonly state values\n  const value: any = { state, dispatch }\n  return (\n    <StateContext.Provider value={value}>\n      {props.children}\n    </StateContext.Provider>\n  )\n}\n\nexport const useGlobalState = (): AppContext => React.useContext(StateContext)\nexport default useGlobalState\n","import React from 'react'\n\nimport styles from './index.module.scss'\n\ntype Props = {\n  infinite?: boolean\n}\n\nexport default (props: Props) => {\n  const style: any = {}\n  if (props.infinite) {\n    style.animationIterationCount = 'infinite'\n    style.animationDirection = 'alternate'\n  }\n  return (\n    <>\n      <div className={styles.logo}>\n        <div className={styles.blob} style={style}></div>\n        <div className={styles.blob} style={style}></div>\n      </div>\n\n      <svg\n        className={styles.svgFilter}\n        xmlns=\"http://www.w3.org/2000/svg\"\n        version=\"1.1\"\n      >\n        <defs>\n          <filter id=\"goo\">\n            <feGaussianBlur\n              in=\"SourceGraphic\"\n              stdDeviation=\"10\"\n              result=\"blur\"\n            />\n            <feColorMatrix\n              in=\"blur\"\n              mode=\"matrix\"\n              values=\"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7\"\n              result=\"goo\"\n            />\n            <feBlend in=\"SourceGraphic\" in2=\"goo\" />\n          </filter>\n        </defs>\n      </svg>\n    </>\n  )\n}\n","import React from 'react'\nimport Logo from 'components/Logo'\n\ntype Props = {\n  text?: string | null\n}\n\nexport default (props: Props) => {\n  return (\n    <>\n      <Logo infinite />\n    </>\n  )\n}\n","import React from 'react'\n\nimport styles from './index.module.scss'\n\ntype Props = {\n  children: React.ReactNode\n}\n\nexport default ({ children }: Props) => {\n  return <div className={styles.wrapper}>{children}</div>\n}\n","import React from 'react'\nimport classNames from 'classnames'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n\nimport useGlobalState from 'store/state'\nimport { IconProp } from '@fortawesome/fontawesome-svg-core'\n\nimport styles from './index.module.scss'\n\ntype Props = {\n  onClick: () => void\n  small?: boolean\n}\n\nexport default ({ onClick, small }: Props) => {\n  const { state } = useGlobalState()\n\n  if (!state.auth.user) return <></>\n\n  const isLocked = state.auth.user && state.auth.user.hasPassword\n  const icon: IconProp = isLocked ? 'lock' : 'lock-open'\n\n  return (\n    <button className={styles.badge} onClick={onClick}>\n      <span\n        className={ styles.dot }\n        style={{ color: `#${state.auth.user.color}` }}\n      >\n        <FontAwesomeIcon icon={ state.auth.user.icon || 'circle' } />\n      </span>\n      <span className={styles.name}>{state.auth.user.name}</span>\n      <FontAwesomeIcon\n        className={classNames(styles.lock, {\n          [styles.closed]: isLocked,\n        })}\n        icon={icon}\n      />\n    </button>\n  )\n}\n","import React from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { Link } from 'react-router-dom'\n\nimport styles from './index.module.scss'\n\nexport default () => (\n  <Link\n    className={styles.badge}\n    to=\"/admin\"\n    title=\"Monitoring\"\n    style={{ marginLeft: '1em' }}\n  >\n    <FontAwesomeIcon className={styles.icon} icon=\"shield-alt\" />\n  </Link>\n)\n","import { useEffect, useState } from 'react'\nimport axios, { AxiosRequestConfig, AxiosError } from 'axios'\n\nimport { API_URL } from '../constants'\n\nexport type FetchMethod = 'GET' | 'POST' | 'PUT' | 'DELETE'\nexport const CSRF_HEADER = 'x-csrf-token'\nlet csrfToken = ''\n\nexport type FetchError = {\n  status: number\n  message: string\n  errors: string[]\n  data?: any\n}\n\ntype FetchReturn<T> = [boolean, T | null, FetchError | null]\n\naxios.defaults.withCredentials = true\n\nfunction useFetch<T>(\n  path: string,\n  method: FetchMethod,\n  body?: any\n): FetchReturn<T> {\n  const [error, setError] = useState<FetchError | null>(null)\n  const [loading, setLoading] = useState<boolean>(true)\n  const [response, setResponse] = useState<T | null>(null)\n\n  useEffect(() => {\n    const sendRequest = async () => {\n      try {\n        const data = await fetchResource(path, method, body)\n        setResponse(data)\n      } catch (error) {\n        setError(error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    sendRequest()\n  }, [path, method, body])\n\n  return [loading, response, error]\n}\n\nexport const fetchResource = async (\n  path: string,\n  method: FetchMethod,\n  body?: any\n) => {\n  if (!path) {\n    throw new Error(`'url' is required for fetching data`)\n  }\n\n  const url = `${API_URL}${path}`\n  const options: AxiosRequestConfig = {\n    url,\n    method,\n    data: body,\n    timeout: 6000,\n    withCredentials: true,\n    xsrfHeaderName: CSRF_HEADER,\n    headers: {},\n  }\n\n  if (csrfToken.length > 0) {\n    options.headers[CSRF_HEADER] = csrfToken\n  }\n\n  try {\n    const response = await axios(options)\n\n    if (response.headers[CSRF_HEADER]) {\n      csrfToken = response.headers[CSRF_HEADER]\n    }\n\n    return await response.data\n  } catch (error) {\n    if (error.response) {\n      console.warn(`useFetch error on ${method} ${path}`, error.response)\n      const returnError: FetchError = {\n        status: error.response.status,\n        message: parseAxiosError(error),\n        errors: parseErrorList(error),\n        data: error.response.data\n      }\n      throw returnError\n    }\n\n    console.warn(`useFetch network error on ${method} ${path}`, error)\n    const returnError: FetchError = {\n      status: 500,\n      message: error.message,\n      errors: [error.message],\n    }\n    throw returnError\n  }\n}\n\nfunction parseAxiosError(error: AxiosError): string {\n  if (!error.response || !error.response.data) {\n    return error.message || 'An error occurred'\n  }\n\n  return parseErrorList(error).join('. ')\n}\n\nfunction parseErrorList(error: AxiosError): string[] {\n  const defaultError = 'An error occurred'\n  if (!error.response || !error.response.data) {\n    return [error.message || defaultError]\n  }\n\n  return parseErrors(\n    defaultError,\n    error.response.data,\n    error.response.data.errors,\n    error.response.data.error\n  )\n}\n\nfunction parseErrors(defaultError: string, ...errors: any[]): string[] {\n  for (let i = 0; i < errors.length; i++) {\n    const error = errors[i]\n    if (Array.isArray(error)) return error\n    if (typeof error === 'string') return [error]\n  }\n\n  return [defaultError]\n}\n\nexport default useFetch\n","import React, { useState } from 'react'\nimport { Button, Modal, Form } from 'react-bootstrap'\nimport classNames from 'classnames'\n\nimport { fetchResource } from 'util/fetch'\nimport { API_URL } from '../../../../constants'\nimport useGlobalState from 'store/state'\n\nimport styles from './index.module.scss'\n\ntype Props = {\n  show: boolean\n  onHide: () => void\n}\n\nexport default ({ show, onHide }: Props) => {\n  const { state, dispatch } = useGlobalState()\n\n  const [validated, setValidated] = useState<boolean>(false)\n  const [password, setPassword] = useState<string>('')\n  const [repeatPassword, setRepeatPassword] = useState<string>('')\n\n  let title = 'Claim Username'\n\n  if (state.auth.user && state.auth.user.hasPassword) {\n    title = 'Update Password'\n  }\n\n  const handleSubmit = (event: React.ChangeEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    event.stopPropagation()\n\n    setValidated(true)\n\n    const form = event.currentTarget\n    if (!form.checkValidity()) {\n      return\n    }\n\n    const body = {\n      password,\n      repeatPassword,\n    }\n\n    fetchResource('/password', 'POST', body)\n      .then(() => {\n        dispatch({\n          type: 'user_password',\n          payload: true,\n        })\n\n        onHide()\n        setValidated(false)\n        setPassword('')\n        setRepeatPassword('')\n      })\n      .catch((reason) => {\n        dispatch({\n          type: 'error',\n          payload: reason.errors.join(', '),\n        })\n      })\n  }\n\n  return (\n    <Modal show={show} onHide={onHide}>\n      <Form noValidate validated={validated} onSubmit={handleSubmit}>\n        <Modal.Header closeButton>\n          <Modal.Title>{title}</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <Form.Group controlId=\"pwd.new\">\n            <Form.Control\n              as=\"input\"\n              type=\"password\"\n              autoComplete=\"new-password\"\n              placeholder=\"Password...\"\n              autoFocus\n              required\n              minLength={6}\n              onChange={(event) => {\n                setPassword(event.currentTarget.value)\n              }}\n              value={password}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              The password is too short. Minimum length is 6 characters.\n            </Form.Control.Feedback>\n          </Form.Group>\n\n          <Form.Group controlId=\"pwd.new\">\n            <Form.Control\n              as=\"input\"\n              type=\"password\"\n              autoComplete=\"new-password\"\n              placeholder=\"Repeat Password...\"\n              required\n              minLength={6}\n              pattern={password}\n              onChange={(event) => {\n                setRepeatPassword(event.currentTarget.value)\n              }}\n              value={repeatPassword}\n            />\n            <Form.Control.Feedback type=\"invalid\">\n              The passwords don't match!\n            </Form.Control.Feedback>\n          </Form.Group>\n        </Modal.Body>\n        <Modal.Footer className={styles.footer}>\n          <a\n            href={`${API_URL}/logout`}\n            className={classNames(styles.left, 'text-danger')}\n          >\n            Logout\n          </a>\n\n          <Button type=\"submit\" variant=\"primary\">\n            Set password\n          </Button>\n        </Modal.Footer>\n      </Form>\n    </Modal>\n  )\n}\n","import React, { useState } from 'react'\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap'\nimport useGlobalState from 'store/state'\n\nimport UserBadge from './UserBadge'\nimport AdminBadge from './AdminBadge'\nimport PasswordModal from './PasswordModal'\n\ntype Props = {\n  children?: React.ReactNode\n}\n\nexport default ({ children }: Props) => {\n  const { state } = useGlobalState()\n\n  const [isOpen, setModalOpen] = useState<boolean>(false)\n\n  const handleClick = () => setModalOpen(true)\n  const handleClose = () => setModalOpen(false)\n\n  let tooltipText = 'Set a password to keep your username'\n\n  if (state.auth.user && state.auth.user.hasPassword) {\n    tooltipText = 'Change your password'\n  }\n\n  return (\n    <>\n      {state.auth.user && state.auth.user.isAdmin && <AdminBadge />}\n      <OverlayTrigger\n        placement=\"bottom\"\n        delay={500}\n        overlay={<Tooltip id=\"passwordLock\">{tooltipText}</Tooltip>}\n      >\n        <UserBadge onClick={handleClick} />\n      </OverlayTrigger>\n\n      <PasswordModal show={isOpen} onHide={handleClose} />\n    </>\n  )\n}\n","import React from 'react'\nimport { IconProp, IconName } from '@fortawesome/fontawesome-svg-core'\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n\nimport useGlobalState from 'store/state'\nimport { User } from 'store/types'\n\ntype Props = {\n  user: User\n}\n\nexport default ({ user }: Props) => {\n  const { state } = useGlobalState()\n\n  const isCurrentUser =\n    state.auth.user && user.user_id === state.auth.user.user_id\n\n  let iconName: IconName = 'circle'\n  let inactive = ''\n\n  // Set icon\n  if (user.icon) {\n    iconName = user.icon\n  } else if (isCurrentUser) {\n    iconName = 'dot-circle'\n  }\n\n  // Set status\n  if (!user.isActive) {\n    iconName = 'meh'\n    inactive = ' (away)'\n  }\n\n  // TODO: Do we need this?\n  let icon: IconProp = iconName\n  if (isCurrentUser) {\n    icon = ['far', iconName]\n  }\n\n  const userColor = user.contrastColor || `#${user.color}`\n\n  return (\n    <OverlayTrigger\n      key={user.user_id}\n      placement=\"bottom\"\n      overlay={\n        <Tooltip id={`user-${user.user_id}`}>\n          @{user.name}\n          {inactive}\n        </Tooltip>\n      }\n    >\n      <FontAwesomeIcon style={{ color: userColor }} icon={icon} />\n    </OverlayTrigger>\n  )\n}\n","import React from 'react'\n\nimport styles from './index.module.scss'\nimport useGlobalState from 'store/state'\nimport User from './User'\n\nexport default () => {\n  const { state } = useGlobalState()\n\n  return (\n    <div className={styles.onlineUsers}>\n      <span className={styles.count}>{state.onlineUsers.length}</span>\n\n      {state.onlineUsers.map((user) => (\n        <User user={user} />\n      ))}\n    </div>\n  )\n}\n","import React from 'react'\nimport logo from 'assets/img/dotdot.svg'\n\nimport Wrapper from '../Wrapper'\n\nimport styles from './index.module.scss'\nimport PasswordLock from '../Session'\nimport OnlineUsers from '../OnlineUsers'\n\ntype Props = {\n  scrollingWhileFocused?: boolean\n}\n\nexport default ({ scrollingWhileFocused }: Props) => {\n  const top = scrollingWhileFocused ? window.pageYOffset + 'px' : 0\n  const position = scrollingWhileFocused ? 'absolute' : 'fixed'\n\n  return (\n    <header className={styles.header} style={{ position, top }}>\n      <Wrapper>\n        <img className={styles.logo} src={logo} alt=\"dotdot logo\" />\n\n        <div className={styles.online}>\n          <OnlineUsers />\n        </div>\n\n        <div className={styles.badge}>\n          <PasswordLock />\n        </div>\n      </Wrapper>\n    </header>\n  )\n}\n","import React from 'react'\nimport { Table } from 'react-bootstrap'\n\nexport default () => {\n  return (\n    <div>\n      <h4>Welcome to dotdot</h4>\n      <p>\n        This is a place where you can chat with people whenever you want :)\n        <br />\n        We don't save any messages, so when the last person in a chat\n        disconnects, the chat history is lost.\n      </p>\n      <p>Inactive user accounts are deleted after 2 weeks without chatting.</p>\n\n      <h6>Keep your User</h6>\n      <p>\n        You can set a password to protect your username from being deleted and\n        used by someone else. Simply click on the lock in the top left corner.\n      </p>\n\n      <h6>Private Messages</h6>\n      <p>\n        You can send anyone a private message simply by starting your message\n        with @ and their name. You'll see the text box change to orange and a\n        lock icon appear.\n      </p>\n      <p>\n        Only you and the person you send the message to can see them. If they\n        are offline they won't receive the message\n      </p>\n\n      <h5>Commands</h5>\n      <p>There are some commands that you can use:</p>\n      <Table size=\"sm\" variant=\"dark\">\n        <thead>\n          <tr>\n            <th>Command</th>\n            <th>Example</th>\n            <th>Description</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>\n              <code>/help</code>\n            </td>\n            <td>\n              <code>/help</code>\n            </td>\n            <td>It shows this message</td>\n          </tr>\n          <tr>\n            <td>\n              <code>/set color</code>\n            </td>\n            <td>\n              <code>/set color eb0000</code>\n            </td>\n            <td>\n              Change your color, the color needs to be a hex representation\n              (sorry if this sounds confusing, soon there will be an easier way\n              to do this)\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <code>/set icon</code>\n            </td>\n            <td>\n              <code>/set icon smile</code>\n            </td>\n            <td>\n              Change your icon, pick any of the ones from{' '}\n              <a\n                href=\"https://fontawesome.com/icons?d=gallery&s=regular&c=emoji&m=free\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                this list\n              </a>\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <code>/list</code>\n            </td>\n            <td>\n              <code>/list</code>\n            </td>\n            <td>Get a list of the users who are currently online</td>\n          </tr>\n        </tbody>\n      </Table>\n    </div>\n  )\n}\n","import React from 'react'\nimport reactStringReplace from 'react-string-replace'\n\nimport { User } from 'store/types'\nimport HelpMessage from '../HelpMessage'\nimport styles from './index.module.scss'\n\ntype Props = {\n  content: string\n  isSystem: boolean\n  onlineUsers: User[]\n}\n\nconst USER_REGEX = new RegExp('@([A-Za-z0-9]+(?:[_][A-Za-z0-9]+)*_?)', 'gmi')\nconst URL_REGEX = new RegExp(\n  /((?:ftp|http|https):\\/\\/(?:\\w+:{0,1}\\w*@)?(?:\\S+)(?::[0-9]+)?(?:\\/|\\/(?:[\\w#!:.?+=&%@!\\-/]))?)/,\n  'gmi'\n)\n\nexport default ({ content, isSystem, onlineUsers }: Props) => {\n\n  let messageContent: React.ReactNodeArray | JSX.Element | string = content\n\n  if (isSystem && content === '/help') {\n    messageContent = <HelpMessage />\n  } else {\n    // replace mentions with colored version\n    messageContent = reactStringReplace(\n      messageContent,\n      USER_REGEX,\n      (username, index) => {\n        let style = {}\n        const userIndex = onlineUsers.findIndex(\n          (user) => user.name === username\n        )\n        if (userIndex > -1) {\n          const userColor = onlineUsers[userIndex].contrastColor || '#' + onlineUsers[userIndex].color\n          style = {\n            color: userColor,\n          }\n        }\n        return (\n          <span key={index} className={styles.mention} style={style}>\n            @{username}\n          </span>\n        )\n      }\n    )\n    // auto-link urls\n    messageContent = reactStringReplace(messageContent, URL_REGEX, (url) => {\n      return (\n        <a key={url} href={url} rel=\"noopener noreferrer\" target=\"_blank\">\n          {url}\n        </a>\n      )\n    })\n  }\n\n  return (\n    <div className={ styles.messageContent }>\n      { messageContent }\n    </div>\n  )\n}\n","import React from 'react'\nimport classNames from 'classnames'\nimport { IconProp, IconName } from '@fortawesome/fontawesome-svg-core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { OverlayTrigger, Tooltip, Button } from 'react-bootstrap'\n\nimport { Message } from 'store/types'\nimport styles from './index.module.scss'\nimport useGlobalState from 'store/state'\nimport MessageContent from './MessageContent'\n\ntype Props = {\n  reply?: boolean\n  message: Message\n  onClick?: (messageTimestamp: number) => void\n}\n\nconst MessageComponent = ({ message, onClick, reply }: Props) => {\n  const { state } = useGlobalState()\n\n  // User data comes from online users if available\n  const userData =\n    state.onlineUsers.find((user) => user.user_id === message.user.user_id) ||\n    message.user\n\n  const userContrastColor = userData.contrastColor || `#${userData.color}`\n  const isSystem = userData.user_id === 'dotdot'\n  const isUserOnline =\n    isSystem ||\n    state.onlineUsers.findIndex((user) => user.user_id === userData.user_id) >\n      -1\n\n  let iconName: IconName = 'circle'\n  if (userData.icon) {\n    iconName = userData.icon\n  } else if (userData.user_id === state.auth.user?.user_id) {\n    iconName = 'dot-circle'\n  }\n\n  // special icons\n  if (isSystem) {\n    iconName = 'cog'\n  } else if (message.attributes.draft) {\n    iconName = 'circle-notch'\n  } else if (message.attributes.private) {\n    iconName = 'lock'\n  } else if (!isUserOnline) {\n    iconName = 'meh'\n  }\n\n  const isReplyAllowed =\n    !reply && onClick && !isSystem && !message.attributes.draft\n\n  const onReplyClick = () => {\n    if (!isReplyAllowed || !onClick) {\n      return\n    }\n    onClick(message.timestamp.getTime())\n  }\n\n  let icon: IconProp = iconName\n  if (userData.user_id === state.auth.user?.user_id) {\n    icon = ['far', iconName]\n  }\n\n  let messageBody;\n\n  if (reply) {\n    messageBody = message.content.join('. ')\n  } else {\n    messageBody = message.content.map((content, index) => (\n      <MessageContent\n        content={content}\n        isSystem={isSystem}\n        onlineUsers={state.onlineUsers}\n        key={index}\n      />\n    ))\n  }\n\n  return (\n    <div\n      id={ 'message-' + message.timestamp.getTime() }\n      className={classNames(styles.message, {\n        [styles.reply]: reply,\n        [styles.system]: isSystem,\n        [styles.offline]: !isUserOnline,\n        [styles.inactive]: !userData.isActive,\n        [styles.draft]: message.attributes.draft,\n        [styles.private]: message.attributes.private,\n      })}\n    >\n      {isReplyAllowed && (\n        <div className={styles.replyButton}>\n          <Button\n            variant=\"link\"\n            onClick={onReplyClick}\n            title=\"Reply to this message\"\n          >\n            <FontAwesomeIcon icon=\"reply\" />\n          </Button>\n        </div>\n      )}\n      <div\n        className={classNames(styles.icon, {\n          [styles.private]: message.attributes.private,\n        })}\n        style={{ color: userContrastColor, background: userContrastColor }}\n      >\n        {message.attributes.private && (\n          <OverlayTrigger\n            placement=\"right\"\n            overlay={\n              <Tooltip id={`user-${userData.user_id}`}>\n                Private message from <b>@{userData.name}</b>\n                <br />\n                Only you can see this.\n              </Tooltip>\n            }\n          >\n            <FontAwesomeIcon icon={icon} />\n          </OverlayTrigger>\n        )}\n        {!message.attributes.private && (\n          <FontAwesomeIcon icon={icon} spin={message.attributes.draft} />\n        )}\n      </div>\n\n      <div className={classNames(styles.user)}>\n        <span style={{ color: userContrastColor }}>{userData.name}</span>\n        {!message.attributes.draft && (\n          <span className={classNames(styles.timestamp)}>\n            {message.timestamp.toLocaleTimeString([], {\n              hour: 'numeric',\n              minute: '2-digit',\n            })}\n          </span>\n        )}\n      </div>\n      {!reply && message.attributes.replyTo && message.attributes.replyTo.user && (\n        <a\n          href={ '#message-' + message.attributes.replyToTimestamp }\n          className={styles.replyBox}\n          style={{\n            borderLeftColor: `#${message.attributes.replyTo.user.color}`,\n          }}\n        >\n          <MessageComponent reply message={message.attributes.replyTo} />\n        </a>\n      )}\n      <div className={classNames(styles.body)}>\n        {messageBody}\n      </div>\n    </div>\n  )\n}\n\nexport default MessageComponent\n","import React, { useEffect, useCallback, useState, useRef } from 'react'\n\nconst SCROLL_THRESHOLD = 200\nconst SCROLL_DEBOUNCE_DELAY = 150\n\ntype Props = {\n  onScrollChanged?: (isAtBottom: boolean) => void,\n  boxRef: React.RefObject<HTMLElement | null>,\n  threshold?: number,\n  children?: any,\n}\n\nexport default ({ boxRef, onScrollChanged, threshold, children }: Props) => {\n  const [ scrollTop, setScrollTop ] = useState<number>(-1);\n  const [ height, setHeight ] = useState<number>(0);\n  const scrollDebounce = useRef<any>(null)\n\n  const onScrollDebounced = useCallback((isAtBottom: boolean) => {\n    clearTimeout(scrollDebounce.current)\n\n    if (onScrollChanged) {\n      scrollDebounce.current = setTimeout(() => {\n        onScrollChanged(isAtBottom)\n      }, SCROLL_DEBOUNCE_DELAY)\n    }\n  }, [onScrollChanged])\n\n  const scrollToBottom = useCallback(() => {\n    if (!boxRef || !boxRef.current) {\n      return\n    }\n\n    const scrollHeight = boxRef.current.scrollHeight - boxRef.current.offsetHeight\n    boxRef.current.scrollTop = scrollHeight\n\n    setScrollTop(boxRef.current.scrollTop)\n    onScrollDebounced(true)\n  }, [boxRef, onScrollDebounced, setScrollTop])\n\n  const updateScrollState = useCallback((shouldScroll: boolean) => () => {\n    if (!boxRef || !boxRef.current) {\n      return\n    }\n\n    if (scrollTop > 0) {\n      const customThreshold = threshold || SCROLL_THRESHOLD\n      if (scrollTop > 0 && Math.abs(boxRef.current.scrollTop - scrollTop) > customThreshold) {\n         // we are not at the bottom of the page, so we won't do anything\n        onScrollDebounced(false)\n        return\n      } else {\n        onScrollDebounced(true)\n      }\n    }\n\n    if (shouldScroll) {\n      scrollToBottom()\n    }\n  }, [boxRef, onScrollDebounced, threshold, scrollToBottom, scrollTop])\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", scrollToBottom, true);\n\n    if (boxRef && boxRef.current) {\n      boxRef.current.addEventListener('scroll', updateScrollState(false), true)\n    }\n\n    // cleanup\n    return () => {\n      window.removeEventListener(\"resize\", scrollToBottom, true);\n    }\n  }, [boxRef, scrollToBottom, updateScrollState])\n\n  useEffect(() => {\n    // when the children changes, recalculate\n    if (!boxRef.current) {\n      return;\n    }\n    const newHeight = boxRef.current.scrollHeight;\n    if (newHeight !== height) {\n      setHeight(newHeight)\n      updateScrollState(true)()\n    }\n  }, [boxRef, height, updateScrollState, children])\n\n  return (\n    <>\n      { children }\n    </>\n  )\n}\n","import React, { useEffect, useRef, useCallback } from 'react'\nimport { Container, Button } from 'react-bootstrap'\nimport { useImmer } from 'use-immer'\nimport classNames from 'classnames'\n\nimport MessageComponent from './Message'\n\nimport styles from './index.module.scss'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport ScrollBox from './ScrollBox'\nimport useGlobalState from 'store/state'\n\ntype State = {\n  scrollAtBottom: boolean,\n  unseenMessages: boolean, // are there new messages below the scroll point?\n}\n\ntype Props = {\n  onMessageClick: (messageTimestamp: number) => void,\n}\n\nexport default (props: Props) => {\n  const { state } = useGlobalState()\n  const [localState, setLocalState] = useImmer<State>({\n    scrollAtBottom: true,\n    unseenMessages: false,\n  })\n\n  const chatAreaRef = useRef<HTMLDivElement>(null)\n\n  const onScrollChanged = useCallback((isAtBottom: boolean) => {\n    setLocalState(draft => {\n      draft.scrollAtBottom = isAtBottom\n      if (isAtBottom) {\n        draft.unseenMessages = false\n      }\n    })\n  }, [setLocalState])\n\n  const scrollToBottom = useCallback(() => {\n    if (!chatAreaRef || !chatAreaRef.current) {\n      return\n    }\n    const scrollHeight = chatAreaRef.current.scrollHeight - chatAreaRef.current.offsetHeight\n    chatAreaRef.current.scrollTop = scrollHeight\n\n    setLocalState(draft => {\n      draft.unseenMessages = false\n    })\n  }, [setLocalState])\n\n  useEffect(() => {\n    setLocalState(draft => {\n      draft.unseenMessages = !draft.scrollAtBottom\n    })\n  }, [state.messages, setLocalState])\n\n  // TODO set this on new messages: draft.unseenMessages = !draft.scrollAtBottom\n\n  return (\n    <div className={ styles.messages }>\n      { localState.unseenMessages && (\n        <div className={ classNames(styles.unseen) }>\n          <Container className={ styles.unseenContainer }>\n            <Button variant=\"secondary\" size=\"sm\" onClick={ scrollToBottom }>\n              <FontAwesomeIcon icon='arrow-alt-circle-down' /> New messages\n            </Button>\n          </Container>\n        </div>\n      ) }\n        <div className={classNames(styles.messageScroll)} ref={chatAreaRef}>\n          <div className='container'>\n            <ScrollBox\n              boxRef={ chatAreaRef }\n              onScrollChanged={ onScrollChanged }\n            >\n              {state.messages.map((eachMessage) => (\n                <MessageComponent\n                  key={eachMessage.timestamp.getTime()}\n                  onClick={ props.onMessageClick }\n                  message={eachMessage}\n                />\n              ))}\n            </ScrollBox>\n          </div>\n        </div>\n    </div>\n  )\n}\n","import React, { useContext, useRef, useCallback } from 'react'\nimport { Form, InputGroup, Button } from 'react-bootstrap'\nimport { useImmer } from 'use-immer'\nimport classNames from 'classnames'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { IconProp } from '@fortawesome/fontawesome-svg-core'\n\nimport { SocketContext } from 'util/socketProvider'\nimport { VALID_USERNAME } from '../../../constants'\nimport useGlobalState from 'store/state'\nimport { EVENTS, Message, OutgoingMessage } from 'store/types'\nimport MessageComponent from '../Messages/Message'\n\nimport styles from './index.module.scss'\n\ntype State = {\n  message: string\n  private: boolean\n  to: string | null\n  isCommand: boolean\n  focused: boolean\n}\n\ntype Props = {\n  replyTo?: Message | null\n  onFocus?: () => void\n  onBlur?: () => void\n  onCancelReply?: () => void\n}\n\nexport default ({ onFocus, onBlur, replyTo, onCancelReply }: Props) => {\n  const { state, dispatch } = useGlobalState()\n\n  const [localState, setState] = useImmer<State>({\n    message: '',\n    private: false,\n    to: null,\n    isCommand: false,\n    focused: false,\n  })\n  const draftTimer = useRef<any>(null)\n  const inputRef = useRef<any>(null)\n\n  const { socket } = useContext(SocketContext)\n\n  const askForHelp = () => {\n    dispatch({\n      type: 'system_message',\n      payload: '/help',\n    })\n  }\n\n  const onInputFocus = useCallback(() => {\n    setState((draft) => {\n      draft.focused = true\n    })\n    onFocus && onFocus()\n  }, [setState, onFocus])\n\n  const onInputBlur = useCallback(() => {\n    setState((draft) => {\n      draft.focused = false\n    })\n    onBlur && onBlur()\n  }, [setState, onBlur])\n\n  const handleSubmit = (e: React.ChangeEvent<any>) => {\n    e.preventDefault()\n\n    if (localState.message.length < 1 || localState.message.trim().length < 1) {\n      return\n    }\n\n    sendMessage(localState.message)\n\n    setState((draft) => {\n      draft.message = ''\n      draft.private = false\n      draft.isCommand = false\n    })\n\n    // refocus the input\n    setTimeout(() => {\n      if (inputRef.current) {\n        inputRef.current.focus()\n      }\n    })\n\n    onCancelReply && onCancelReply()\n  }\n\n  const sendMessage = (message: string, draft: boolean = false) => {\n    if (!draft && (message.length < 1 || message.trim().length < 1)) {\n      return\n    }\n\n    if (message === '/help') {\n      return askForHelp()\n    }\n\n    let type = EVENTS.MESSAGE\n    if (localState.isCommand) {\n      type = EVENTS.COMMAND\n    }\n\n    const payload: OutgoingMessage = {\n      content: message,\n      attributes: {\n        draft,\n        private: localState.private,\n        to: localState.to,\n        replyToTimestamp: replyTo ? replyTo.timestamp.getTime() : null,\n      },\n    }\n\n    socket?.emit(type, payload)\n  }\n\n  const onType = (e: React.ChangeEvent<any>) => {\n    e.preventDefault()\n\n    clearTimeout(draftTimer.current)\n\n    const value: string = e.currentTarget.value\n\n    // special messages\n    let isCommand = false\n    let isPM = false\n    let to: string | null = null\n\n    if (value[0] === '/') {\n      isCommand = true\n    } else if (value[0] === '@') {\n      const words = value.split(' ')\n      isPM = true\n      if (\n        words.length > 0 &&\n        words[0][0] === '@' &&\n        VALID_USERNAME.test(words[0].substr(1))\n      ) {\n        to = words[0].substr(1)\n      }\n    }\n\n    setState((draft) => {\n      draft.message = value\n      draft.private = isPM\n      draft.to = to\n      draft.isCommand = isCommand\n    })\n\n    if (isPM || isCommand) {\n      return\n    }\n\n    if (state.draftTimer > 0) {\n      draftTimer.current = setTimeout(() => {\n        sendMessage(value, true)\n      }, state.draftTimer)\n    }\n  }\n\n  let icon: IconProp = 'question-circle'\n  if (localState.isCommand) {\n    icon = 'code'\n  } else if (localState.private) {\n    icon = 'lock'\n  }\n\n  const onIconClick = () => {\n    if (icon !== 'question-circle') {\n      return\n    }\n    askForHelp()\n  }\n\n  return (\n    <div\n      className={classNames(styles.area, 'container', {\n        [styles.focused]: localState.focused,\n      })}\n    >\n      {replyTo && (\n        <div\n          className={styles.reply}\n          style={{ borderLeftColor: `#${replyTo.user.color}` }}\n        >\n          <div className={styles.actions}>\n            <Button variant=\"link\" onClick={onCancelReply}>\n              <FontAwesomeIcon icon=\"times\" />\n            </Button>\n          </div>\n          <MessageComponent reply message={replyTo} />\n        </div>\n      )}\n      <Form\n        noValidate\n        onSubmit={handleSubmit}\n        className={classNames(styles.textBox, {\n          [styles.private]: localState.private,\n          [styles.command]: localState.isCommand,\n        })}\n      >\n        <InputGroup className={classNames(styles.inputGroup)}>\n          <Form.Control\n            as=\"input\"\n            type=\"text\"\n            placeholder=\"Type a message...\"\n            ref={inputRef}\n            autoFocus\n            autoComplete=\"off\"\n            onChange={onType}\n            onFocus={onInputFocus}\n            onBlur={onInputBlur}\n            value={localState.message}\n          />\n          <InputGroup.Append className={styles.button}>\n            <Button type=\"submit\">\n              <FontAwesomeIcon icon=\"paper-plane\" />\n            </Button>\n          </InputGroup.Append>\n          <div className={styles.textIcon} onClick={onIconClick}>\n            <FontAwesomeIcon icon={icon} />\n          </div>\n        </InputGroup>\n      </Form>\n    </div>\n  )\n}\n","import React, { useEffect, useCallback } from 'react'\nimport classNames from 'classnames'\nimport smoothscroll from 'smoothscroll-polyfill'\n\nimport { useGlobalState } from 'store/state'\nimport Loader from 'components/Loader'\n\nimport styles from './index.module.scss'\nimport Header from './Header'\nimport Messages from './Messages'\nimport TextBox from './TextBox'\nimport { useImmer } from 'use-immer'\nimport { Message } from 'store/types'\n\n// fix for browser with no smooth scrolling\nsmoothscroll.polyfill()\n\ntype State = {\n  isTextBoxFocused: boolean\n  scrollingWhileFocused: boolean\n  replyTo: Message | null\n}\n\nexport default () => {\n  const { state } = useGlobalState()\n  const [localState, setState] = useImmer<State>({\n    isTextBoxFocused: false,\n    scrollingWhileFocused: false,\n    replyTo: null,\n  })\n\n  const onMessageClick = useCallback(\n    (messageTimestamp: number) => {\n      setState((draft) => {\n        const messageReply =\n          state.messages.find(\n            (eachMessage) =>\n              eachMessage.timestamp.getTime() === messageTimestamp\n          ) || null\n        console.log('replying to ', messageReply)\n        draft.replyTo = messageReply\n      })\n    },\n    [state.messages, setState]\n  )\n\n  const cancelReply = useCallback(() => {\n    setState((draft) => {\n      draft.replyTo = null\n    })\n  }, [setState])\n\n  // On window scroll\n  const setHeaderPosition = useCallback(() => {\n    setState((draft) => {\n      if (draft.isTextBoxFocused) {\n        draft.scrollingWhileFocused = true\n      }\n    })\n    // eslint-disable-next-line\n  }, [setState])\n\n  useEffect(() => {\n    window.addEventListener('scroll', setHeaderPosition, true)\n\n    return () => {\n      window.removeEventListener('scroll', setHeaderPosition)\n    }\n  }, [setHeaderPosition])\n\n  const handleTextBoxFocus = () => {\n    setState((draft) => {\n      draft.isTextBoxFocused = true\n    })\n    setHeaderPosition()\n  }\n\n  if (!state.socket.connected) {\n    return <Loader />\n  }\n\n  const handleTextBoxBlur = () => {\n    setState((draft) => {\n      draft.isTextBoxFocused = false\n      draft.scrollingWhileFocused = false\n    })\n  }\n\n  return (\n    <div\n      className={classNames({\n        [styles.scrollingChat]: localState.scrollingWhileFocused,\n      })}\n    >\n      <Header scrollingWhileFocused={localState.scrollingWhileFocused} />\n\n      <Messages onMessageClick={onMessageClick} />\n\n      <TextBox\n        replyTo={localState.replyTo}\n        onFocus={handleTextBoxFocus}\n        onBlur={handleTextBoxBlur}\n        onCancelReply={cancelReply}\n      />\n    </div>\n  )\n}\n","import React from 'react'\n\nimport Loader from 'components/Loader'\n\nexport default () => {\n  return (\n    <>\n      <Loader />\n    </>\n  )\n}\n","import React from 'react'\nimport { Route, Redirect } from 'react-router-dom'\nimport { useGlobalState } from 'store/state'\n\nimport Loading from 'sections/loading'\n\ntype Props = {\n  path: string\n  exact?: boolean\n  component?: React.ComponentType<any>\n}\n\n/**\n * This Route only allows browsing into if the user IS logged in\n */\nexport default (props: Props) => {\n  const { state } = useGlobalState()\n  if (!state.auth.checked) {\n    return <Loading />\n  }\n\n  if (!state.auth.loggedIn) {\n    return <Redirect to=\"/login\" />\n  }\n\n  return (\n    <Route path={props.path} exact={props.exact} component={props.component} />\n  )\n}\n","import React from 'react'\nimport { Route, Redirect } from 'react-router-dom'\nimport { useGlobalState } from 'store/state'\n\nimport Loading from 'sections/loading'\n\ntype Props = {\n  path: string\n  exact?: boolean\n  component?: React.ComponentType<any>\n}\n\n/**\n * This Route only allows browsing into if the user is NOT logged in\n */\nexport default (props: Props) => {\n  const { state } = useGlobalState()\n  if (!state.auth.checked) {\n    return <Loading />\n  }\n\n  if (state.auth.loggedIn) {\n    return <Redirect to=\"/\" />\n  }\n\n  return (\n    <Route path={props.path} exact={props.exact} component={props.component} />\n  )\n}\n","import React from 'react'\n\nimport { useGlobalState } from 'store/state'\nimport styles from './index.module.scss'\n\nexport default () => {\n  const { state } = useGlobalState()\n\n  if (!state.offline && !state.error) {\n    return null\n  }\n\n  let error = state.error\n  if (Array.isArray(error)) {\n    error = error.join('. ')\n  }\n  if (typeof error !== 'string') {\n    error = String(error)\n  }\n\n  if (state.error) {\n    return <div className={styles.offline}>Error: {error}</div>\n  }\n\n  return (\n    <div className={styles.offline}>\n      You seem to be offline! Please try again later\n    </div>\n  )\n}\n","import React, { useRef } from 'react'\nimport { Form, Container, Button } from 'react-bootstrap'\nimport { useImmer } from 'use-immer'\nimport classNames from 'classnames'\nimport HCaptcha from \"react-hcaptcha\"\nimport ReCaptcha from \"react-google-recaptcha\"\n\nimport { useGlobalState } from 'store/state'\nimport { fetchResource } from 'util/fetch'\nimport Logo from 'components/Logo'\n\nimport styles from './index.module.scss'\nimport { AuthData } from 'store/types'\nimport { CAPTCHA_KEY, CAPTCHA_PROVIDER } from '../../constants'\n\ntype State = {\n  username: string\n  password: string\n  verified: boolean\n  hasPassword: boolean\n  loading: boolean\n}\n\nexport default () => {\n  const { dispatch } = useGlobalState()\n  const [localState, setState] = useImmer<State>({\n    username: '',\n    password: '',\n    verified: false,\n    hasPassword: false,\n    loading: false,\n  })\n\n  const captchaRef = useRef<any>(null)\n\n  const handleSubmit = (e: React.ChangeEvent<any>) => {\n    e.preventDefault()\n    if (localState.verified) {\n      oncaptchaChange('verified')\n      return\n    }\n    captchaRef.current.execute()\n  };\n\n  const oncaptchaChange = (token: string | null) => {\n    if (!token || localState.loading) {\n      return\n    }\n\n    setState((draft) => {\n      draft.loading = true\n    })\n\n    const body = {\n      username: localState.username,\n      password: localState.password,\n      captchaToken: token,\n    }\n    fetchResource('/auth', 'POST', body)\n      .then((data: AuthData) => {\n        if (captchaRef.current.resetCaptcha) {\n          captchaRef.current.resetCaptcha()\n        }\n\n        if (!data || !data.user.user_id) {\n          console.warn('Invalid user object')\n          dispatch({\n            type: 'login',\n            payload: null,\n          })\n          return\n        }\n\n        dispatch({\n          type: 'login',\n          payload: data,\n        })\n      })\n      .catch((reason) => {\n        if (reason.status !== 400) {\n          // username requires password\n          dispatch({\n            type: 'error',\n            payload: reason.errors.join(', '),\n          })\n        }\n\n        if (captchaRef.current.resetCaptcha) {\n          captchaRef.current.resetCaptcha()\n        }\n\n        setState((draft) => {\n          draft.loading = false\n          draft.verified = (reason.data && reason.data.verified) || false\n          if (reason.status === 400) {\n            draft.hasPassword = true\n          }\n        })\n      }\n    )\n  }\n\n  let theme: 'light' | 'dark' = 'light'\n  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n    theme = 'dark'\n  }\n\n  return (\n    <Container className={classNames(styles.login, 'mt-4')}>\n      <Logo />\n      <Form noValidate onSubmit={handleSubmit}>\n        <Form.Group controlId=\"loginForm.username\">\n          <Form.Control\n            as=\"input\"\n            type=\"text\"\n            autoComplete=\"username\"\n            placeholder=\"What's your name?\"\n            disabled={localState.loading}\n            autoFocus\n            minLength={ 1 }\n            maxLength={ 20 }\n            onChange={(e) => {\n              const value = e.currentTarget.value\n              setState((draft) => {\n                draft.username = value\n              })\n            }}\n            value={localState.username}\n          />\n          {localState.hasPassword && (\n            <Form.Control\n              as=\"input\"\n              className=\"mt-2\"\n              type=\"password\"\n              placeholder=\"Password...\"\n              autoComplete=\"current-password\"\n              disabled={localState.loading}\n              autoFocus\n              onChange={(e) => {\n                const value = e.currentTarget.value\n                setState((draft) => {\n                  draft.password = value\n                })\n              }}\n              value={localState.password}\n            />\n          )}\n          { CAPTCHA_PROVIDER === 'recaptcha' && (\n            <ReCaptcha\n              ref={ captchaRef }\n              size='invisible'\n              theme={ theme }\n              sitekey={ CAPTCHA_KEY }\n              onChange={ oncaptchaChange }\n            />\n          )}\n          { CAPTCHA_PROVIDER === 'hcaptcha' && (\n            <HCaptcha\n              ref={ captchaRef }\n              size='invisible'\n              theme={ theme }\n              sitekey={ CAPTCHA_KEY }\n              onVerify={ oncaptchaChange }\n            />\n          )}\n          <p className='text-center mt-4'>\n            <Button type=\"submit\" size='sm'>\n              Login\n            </Button>\n          </p>\n        </Form.Group>\n      </Form>\n    </Container>\n  )\n}\n","import { Action, AuthData } from 'store/types'\n\nimport { fetchResource } from './fetch'\n\nconst OFFLINE_RETRY_DELAY = 2000\n\nexport const checkAuth = (dispatch: React.Dispatch<Action>) => {\n  fetchResource('/auth', 'GET')\n    .then((data: AuthData) => {\n      if (!data || !data.user.user_id) {\n        console.warn('Invalid user object')\n        dispatch({\n          type: 'login',\n          payload: null,\n        })\n        return\n      }\n\n      dispatch({\n        type: 'login',\n        payload: data,\n      })\n    })\n    .catch((reason) => {\n      if (reason.message === 'Network Error') {\n        dispatch({\n          type: 'offline',\n          payload: null,\n        })\n\n        // try again\n        setTimeout(() => {\n          checkAuth(dispatch)\n        }, OFFLINE_RETRY_DELAY)\n      } else {\n        if (reason.status !== 401) {\n          dispatch({\n            type: 'error',\n            payload: reason.errors.join(', '),\n          })\n        }\n\n        dispatch({\n          type: 'login',\n          payload: null,\n        })\n      }\n    })\n}\n\nexport default checkAuth\n","import React, { useEffect } from 'react'\nimport { Switch } from 'react-router-dom'\n\nimport Chat from 'sections/Chat'\nimport AuthenticatedRoute from 'util/AuthenticatedRoute'\nimport UnauthenticatedRoute from 'util/UnauthenticatedRoute'\nimport OfflineCheck from 'components/OfflineCheck'\nimport Login from 'sections/Login'\nimport useGlobalState from 'store/state'\nimport checkAuth from 'util/checkAuth'\nimport Admin from 'sections/Admin'\n\nexport default () => {\n  const { state, dispatch } = useGlobalState()\n\n  // Check authentication state\n  useEffect(() => {\n    if (!state.auth.checked) {\n      checkAuth(dispatch)\n    }\n  }, [state.auth.checked, dispatch])\n\n  return (\n    <>\n      <OfflineCheck />\n      <Switch>\n        <UnauthenticatedRoute path=\"/login\" component={Login} />\n        <AuthenticatedRoute path=\"/admin\" component={Admin} />\n        <AuthenticatedRoute path=\"/\" component={Chat} />\n      </Switch>\n    </>\n  )\n}\n","import React, { useEffect, useContext, useCallback } from 'react'\nimport Helmet from 'react-helmet'\nimport useSound from 'use-sound'\nimport { useImmer } from 'use-immer'\n\nimport { SocketContext } from 'util/socketProvider'\nimport { Message } from 'store/types'\nimport useGlobalState from 'store/state'\nimport newMessageSound from 'assets/sounds/newMessage.mp3'\nimport { dateDiff } from 'lib/dateDiff'\n\nconst TIME_BETWEEN_SOUND = 5 * 1000 // ms\nconst NOTIFICATION_VOLUME = 0.5 // 0-1\n\ntype State = {\n  lastSound: Date | null,\n  windowFocused: boolean,\n  titleNotification: boolean,\n}\n\nexport default () => {\n  const { state } = useGlobalState();\n  const [ localState, setState ] = useImmer<State>({\n    lastSound: new Date(),\n    windowFocused: true,\n    titleNotification: false,\n  })\n\n  const { socket } = useContext(SocketContext)\n  const [ play ] = useSound(newMessageSound, {\n    interrupt: true,\n    volume: NOTIFICATION_VOLUME,\n  });\n\n  const onMessage = useCallback((user_id: string) => (msg: Message) => {\n    if (msg.attributes.draft || user_id === msg.user.user_id) {\n      return\n    }\n\n    setState(draft => {\n      if (!draft.windowFocused) {\n        draft.titleNotification = true;\n\n        if (!draft.lastSound || dateDiff(draft.lastSound) > TIME_BETWEEN_SOUND) {\n          draft.lastSound = new Date()\n          play({})\n        }\n      }\n    })\n  }, [setState, play])\n\n  const onFocus = useCallback(() => {\n    setState(draft => {\n      draft.titleNotification = false\n      draft.windowFocused = true\n    })\n  }, [setState])\n\n  const onBlur = useCallback(() => {\n    setState(draft => {\n      draft.windowFocused = false\n    })\n  }, [setState])\n\n  const user_id = state.auth.user ? state.auth.user.user_id : null\n\n  useEffect(() => {\n    if (!socket || !user_id) {\n      return\n    }\n    socket.on('message', onMessage(user_id))\n  }, [socket, onMessage, user_id])\n\n  useEffect(() => {\n    window.addEventListener('focus', onFocus)\n    window.addEventListener('blur', onBlur)\n\n    return () => {\n      window.removeEventListener('focus', onFocus)\n      window.removeEventListener('blur', onBlur)\n    }\n  }, [onFocus, onBlur])\n\n  return (\n    <Helmet>\n      <title>{localState.titleNotification ? '•• dotdot' : 'dotdot'}</title>\n    </Helmet>\n  )\n}\n","/**\n * Get the difference between two date objects in ms\n */\nexport const dateDiff = (t1: Date, t2: Date = new Date()) => {\n  return t2.getTime() - t1.getTime();\n}","import { library } from '@fortawesome/fontawesome-svg-core'\n\n/**\n * Icon Preloading\n * This is done so that only the icons that we need are loaded from FontAwesome\n */\n\n// Icons available in two styles, regular and solid\n// solid tends to have all free icons, while some regular ones are PRO only\nimport {\n  faLock,\n  faLockOpen,\n  faCircle,\n  faDotCircle,\n  faCircleNotch,\n  faCode,\n  faCog,\n  faArrowAltCircleDown,\n  faMeh,\n  faAngry,\n  faDizzy,\n  faFlushed,\n  faFrown,\n  faFrownOpen,\n  faGrimace,\n  faGrin,\n  faGrinAlt,\n  faGrinBeam,\n  faGrinBeamSweat,\n  faGrinHearts,\n  faGrinSquint,\n  faGrinSquintTears,\n  faGrinStars,\n  faGrinTears,\n  faGrinTongue,\n  faGrinTongueSquint,\n  faGrinTongueWink,\n  faGrinWink,\n  faKiss,\n  faKissBeam,\n  faKissWinkHeart,\n  faLaugh,\n  faLaughBeam,\n  faLaughSquint,\n  faLaughWink,\n  faMehBlank,\n  faMehRollingEyes,\n  faSadCry,\n  faSadTear,\n  faSmile,\n  faSmileBeam,\n  faSmileWink,\n  faSurprise,\n  faTired,\n  faShieldAlt,\n  faQuestionCircle,\n  faPaperPlane,\n  faTimes,\n  faReply,\n} from '@fortawesome/free-solid-svg-icons'\n\nimport {\n  faDotCircle as farDotCircle,\n  faMeh as farMeh,\n  faAngry as farAngry,\n  faDizzy as farDizzy,\n  faFlushed as farFlushed,\n  faFrown as farFrown,\n  faFrownOpen as farFrownOpen,\n  faGrimace as farGrimace,\n  faGrin as farGrin,\n  faGrinAlt as farGrinAlt,\n  faGrinBeam as farGrinBeam,\n  faGrinBeamSweat as farGrinBeamSweat,\n  faGrinHearts as farGrinHearts,\n  faGrinSquint as farGrinSquint,\n  faGrinSquintTears as farGrinSquintTears,\n  faGrinStars as farGrinStars,\n  faGrinTears as farGrinTears,\n  faGrinTongue as farGrinTongue,\n  faGrinTongueSquint as farGrinTongueSquint,\n  faGrinTongueWink as farGrinTongueWink,\n  faGrinWink as farGrinWink,\n  faKiss as farKiss,\n  faKissBeam as farKissBeam,\n  faKissWinkHeart as farKissWinkHeart,\n  faLaugh as farLaugh,\n  faLaughBeam as farLaughBeam,\n  faLaughSquint as farLaughSquint,\n  faLaughWink as farLaughWink,\n  faMehBlank as farMehBlank,\n  faMehRollingEyes as farMehRollingEyes,\n  faSadCry as farSadCry,\n  faSadTear as farSadTear,\n  faSmile as farSmile,\n  faSmileBeam as farSmileBeam,\n  faSmileWink as farSmileWink,\n  faSurprise as farSurprise,\n  faTired as farTired,\n} from '@fortawesome/free-regular-svg-icons'\n\n/**\n * All icons that will be used in this app need to be preloaded here\n */\nlibrary.add(\n  faLock,\n  faLockOpen,\n  faCircle,\n  faDotCircle,\n  farDotCircle,\n  faCircleNotch,\n  faCode,\n  faCog,\n  faArrowAltCircleDown,\n  faMeh,\n  farMeh,\n  faAngry,\n  faDizzy,\n  faFlushed,\n  faFrown,\n  faFrownOpen,\n  faGrimace,\n  faGrin,\n  faGrinAlt,\n  faGrinBeam,\n  faGrinBeamSweat,\n  faGrinHearts,\n  faGrinSquint,\n  faGrinSquintTears,\n  faGrinStars,\n  faGrinTears,\n  faGrinTongue,\n  faGrinTongueSquint,\n  faGrinTongueWink,\n  faGrinWink,\n  faKiss,\n  faKissBeam,\n  faKissWinkHeart,\n  faLaugh,\n  faLaughBeam,\n  faLaughSquint,\n  faLaughWink,\n  faMehBlank,\n  faMehRollingEyes,\n  faSadCry,\n  faSadTear,\n  faSmile,\n  faSmileBeam,\n  faSmileWink,\n  faSurprise,\n  faTired,\n  farAngry,\n  farDizzy,\n  farFlushed,\n  farFrown,\n  farFrownOpen,\n  farGrimace,\n  farGrin,\n  farGrinAlt,\n  farGrinBeam,\n  farGrinBeamSweat,\n  farGrinHearts,\n  farGrinSquint,\n  farGrinSquintTears,\n  farGrinStars,\n  farGrinTears,\n  farGrinTongue,\n  farGrinTongueSquint,\n  farGrinTongueWink,\n  farGrinWink,\n  farKiss,\n  farKissBeam,\n  farKissWinkHeart,\n  farLaugh,\n  farLaughBeam,\n  farLaughSquint,\n  farLaughWink,\n  farMehBlank,\n  farMehRollingEyes,\n  farSadCry,\n  farSadTear,\n  farSmile,\n  farSmileBeam,\n  farSmileWink,\n  farSurprise,\n  farTired,\n  faShieldAlt,\n  faQuestionCircle,\n  faPaperPlane,\n  faTimes,\n  faReply,\n)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\n\nimport { StateProvider } from 'store/state'\nimport SocketProvider from 'util/socketProvider'\n\nimport Router from './router'\nimport Title from './components/Title'\n\nimport './lib/icons'\nimport 'assets/scss/index.scss'\n\n\nconst app = (\n  <BrowserRouter basename={process.env.REACT_APP_BASEPATH}>\n    <StateProvider>\n      <SocketProvider>\n        <Title />\n        <Router />\n      </SocketProvider>\n    </StateProvider>\n  </BrowserRouter>\n)\n\nReactDOM.render(app, document.getElementById('root'))\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"badge\":\"UserBadge_badge__28gDi\",\"lock\":\"UserBadge_lock__EV7LR\",\"closed\":\"UserBadge_closed__3uZeG\",\"pulse\":\"UserBadge_pulse__3c_w7\",\"dot\":\"UserBadge_dot__1T6bu\",\"name\":\"UserBadge_name__jOOgp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dashboardWidget\":\"Widget_dashboardWidget__Z_mwK\",\"title\":\"Widget_title__2QBZt\",\"content\":\"Widget_content__1BMNx\",\"icon\":\"Widget_icon__3cYOg\",\"blue\":\"Widget_blue__1DB9R\",\"green\":\"Widget_green__2mXfC\",\"orange\":\"Widget_orange__X3jtY\",\"history\":\"Widget_history__1eQoj\",\"change\":\"Widget_change__36iJl\",\"text-muted\":\"Widget_text-muted__1SkGI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"Logo_logo__30xDu\",\"svgFilter\":\"Logo_svgFilter__1s9i7\",\"blob\":\"Logo_blob__1iSwo\",\"blob-first\":\"Logo_blob-first__3YKrD\",\"blob-second\":\"Logo_blob-second__2r5Nx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2XEwx\",\"logo\":\"Header_logo__1GzGV\",\"badge\":\"Header_badge__3OtLN\",\"onlineUsers\":\"Header_onlineUsers__2EikY\",\"online\":\"Header_online__2vz5R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages\":\"Messages_messages__tCmp1\",\"messageScroll\":\"Messages_messageScroll__CCnSp\",\"unseen\":\"Messages_unseen__gVw6f\",\"unseenContainer\":\"Messages_unseenContainer__3haBw\"};"],"sourceRoot":""}